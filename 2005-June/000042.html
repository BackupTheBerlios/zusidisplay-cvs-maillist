<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Zusidisplay-cvs] zusidisplay/EBuLa Control.cs,1.3,1.4 Enum.cs,1.2,1.3 UserControl1.cs,1.4,1.5
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/zusidisplay-cvs/2005-June/index.html" >
   <LINK REL="made" HREF="mailto:zusidisplay-cvs%40lists.berlios.de?Subject=Re%3A%20%5BZusidisplay-cvs%5D%20zusidisplay/EBuLa%20Control.cs%2C1.3%2C1.4%20Enum.cs%2C1.2%2C1.3%20UserControl1.cs%2C1.4%2C1.5&In-Reply-To=%3C200506071409.j57E9l132342%40bat.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000041.html">
   <LINK REL="Next"  HREF="000043.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Zusidisplay-cvs] zusidisplay/EBuLa Control.cs,1.3,1.4 Enum.cs,1.2,1.3 UserControl1.cs,1.4,1.5</H1>
    <B>jens_h</B> 
    <A HREF="mailto:zusidisplay-cvs%40lists.berlios.de?Subject=Re%3A%20%5BZusidisplay-cvs%5D%20zusidisplay/EBuLa%20Control.cs%2C1.3%2C1.4%20Enum.cs%2C1.2%2C1.3%20UserControl1.cs%2C1.4%2C1.5&In-Reply-To=%3C200506071409.j57E9l132342%40bat.berlios.de%3E"
       TITLE="[Zusidisplay-cvs] zusidisplay/EBuLa Control.cs,1.3,1.4 Enum.cs,1.2,1.3 UserControl1.cs,1.4,1.5">nobody at sheep.berlios.de
       </A><BR>
    <I>Tue Jun  7 16:09:47 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000041.html">[Zusidisplay-cvs] zusidisplay AboutBox.cs,1.4,1.5 AboutBox.resx,1.3,1.4 AssemblyInfo.cs,1.3,1.4
</A></li>
        <LI>Next message: <A HREF="000043.html">[Zusidisplay-cvs] zusidisplay/EBuLaTools/Sound DxSound.cs,1.2,1.3 SoundInterface.cs,1.2,1.3 tonysound.cs,1.2,1.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update of /cvsroot/zusidisplay/zusidisplay/EBuLa
In directory sheep:/tmp/cvs-serv12919/EBuLa

Modified Files:
	Control.cs Enum.cs UserControl1.cs 
Log Message:
EBuLa: El und Ne Signale begonnen

Index: Control.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/Control.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** Control.cs	6 Jun 2005 11:03:07 -0000	1.3
--- Control.cs	7 Jun 2005 14:09:44 -0000	1.4
***************
*** 366,369 ****
--- 366,453 ----
  				}
  
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;ne2&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;ne 2&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;ne4&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;ne 4&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;el1&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL1;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;el 1&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL1;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;el2&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;el 2&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;el4&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;ne 4&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;el5&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL5;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf(&quot;el 5&quot;);
+ 				if (pos &gt;= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL5;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
  				// Zugfunk
  				pos = this_e.m_ops_name.IndexOf(&quot;ZF&quot;);

Index: Enum.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/Enum.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** Enum.cs	26 May 2005 17:41:33 -0000	1.2
--- Enum.cs	7 Jun 2005 14:09:44 -0000	1.3
***************
*** 6,10 ****
          LZB_BEGINNING, LZB, LZB_ENDING,
          TUNNEL_BEGINNING, TUNNEL_ENDING,
!         POSITION_JUMP, VERKUERTZT
      }
      public enum EntryPos
--- 6,11 ----
          LZB_BEGINNING, LZB, LZB_ENDING,
          TUNNEL_BEGINNING, TUNNEL_ENDING,
!         POSITION_JUMP, VERKUERTZT,
! 		NE2, NE4, EL1, EL2, EL4, EL5
      }
      public enum EntryPos

Index: UserControl1.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/UserControl1.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** UserControl1.cs	6 Jun 2005 11:03:07 -0000	1.4
--- UserControl1.cs	7 Jun 2005 14:09:44 -0000	1.5
***************
*** 2872,2878 ****
  
                          Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
!                         if (e.m_type == EntryType.RADIO_MARKER || e.m_type == EntryType.RADIO_MARKER_ENDING || e.m_type == EntryType.GNT_BEGINNING || e.m_type == EntryType.GNT_ENDING || e.m_type == EntryType.LZB_BEGINNING || e.m_type == EntryType.LZB || e.m_type == EntryType.LZB_ENDING || e.m_type == EntryType.VERKUERTZT)
                          { 
! 							if (e.m_type != EntryType.RADIO_MARKER &amp;&amp; e.m_type != EntryType.RADIO_MARKER_ENDING &amp;&amp; e.m_type != EntryType.VERKUERTZT)
  							{
  								l.Text = &quot;&quot;;
--- 2872,2898 ----
  
                          Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
!                         if (e.m_type == EntryType.RADIO_MARKER || 
! 							e.m_type == EntryType.RADIO_MARKER_ENDING || 
! 							e.m_type == EntryType.GNT_BEGINNING || 
! 							e.m_type == EntryType.GNT_ENDING || 
! 							e.m_type == EntryType.LZB_BEGINNING || 
! 							e.m_type == EntryType.LZB || 
! 							e.m_type == EntryType.LZB_ENDING || 
! 							e.m_type == EntryType.NE2 ||
! 							e.m_type == EntryType.NE4 ||
! 							e.m_type == EntryType.EL1 ||
! 							e.m_type == EntryType.EL2 ||
! 							e.m_type == EntryType.EL4 ||
! 							e.m_type == EntryType.EL5)
                          { 
! 							if (e.m_type != EntryType.RADIO_MARKER &amp;&amp; 
! 								e.m_type != EntryType.RADIO_MARKER_ENDING &amp;&amp; 
! 								e.m_type != EntryType.VERKUERTZT &amp;&amp;
! 								e.m_type != EntryType.NE2 &amp;&amp;
! 								e.m_type != EntryType.NE4 &amp;&amp;
! 								e.m_type != EntryType.EL1 &amp;&amp;
! 								e.m_type != EntryType.EL2 &amp;&amp;
! 								e.m_type != EntryType.EL4 &amp;&amp;
! 								e.m_type != EntryType.EL5)
  							{
  								l.Text = &quot;&quot;;
***************
*** 4047,4050 ****
--- 4067,4072 ----
  						s = &quot;&quot;;
  						break;
+ 					default:
+ 						break;
  				}
  
***************
*** 4075,4079 ****
--- 4097,4156 ----
  					}
  				}
+ 				else if (type == EntryType.NE2)
+ 				{
+ 					//S8090.txt
+ 					//230, 78+(12-pos)*24 
+ 					g.DrawRectangle(new Pen(BLACK), 230+2, 77+(12-pos)*24, 16, 20);
+ 
+ 					Pen pen = new Pen(BLACK, 1f);
+ 					g.DrawLine(pen, new Point(230+2, 77+(12-pos)*24), new Point(230+2+8, 77+(12-pos)*24+9));
+ 					g.DrawLine(pen, new Point(230+2+8, 77+(12-pos)*24+9), new Point(230+2+16, 77+(12-pos)*24));
  
+ 					g.DrawLine(pen, new Point(230+2, 77+(12-pos)*24+20), new Point(230+2+8, 77+(12-pos)*24+11));
+ 					g.DrawLine(pen, new Point(230+2+16, 77+(12-pos)*24+20), new Point(230+2+8, 77+(12-pos)*24+11));
+ 
+ 				}
+ 				else if (type == EntryType.NE4)
+ 				{
+ 					g.DrawRectangle(new Pen(BLACK), 230+2, 77+(12-pos)*24, 16, 20);
+ 					if (control.inverse)
+ 					{
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2+8, 77+(12-pos)*24, 8, 10);
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2, 77+(12-pos)*24+10, 8, 10);
+ 					}
+ 					else
+ 					{
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2, 77+(12-pos)*24, 8, 10);
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2+8, 77+(12-pos)*24+10, 8, 10);
+ 					}
+ 				}
+ 				else if (type == EntryType.EL1)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
+ 				else if (type == EntryType.EL2)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
+ 				else if (type == EntryType.EL4)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					Pen el_pen = new Pen(Color.WhiteSmoke, 3f);
+ 					el_pen.EndCap = LineCap.Triangle;
+ 					el_pen.StartCap = LineCap.Triangle;
+ 					g.DrawLine(el_pen, 232, 77+(12-pos)*24+10, 231+18, 77+(12-pos)*24+10);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
+ 				else if (type == EntryType.EL5)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					Pen el_pen = new Pen(Color.WhiteSmoke, 3f);
+ 					el_pen.EndCap = LineCap.Triangle;
+ 					el_pen.StartCap = LineCap.Triangle;
+ 					g.DrawLine(el_pen, 231+9, 77+(12-pos)*24+1, 231+9, 77+(12-pos)*24+18);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
  			}
  
***************
*** 4130,4133 ****
--- 4207,4241 ----
  			m_conf.FastReadFile();
  			SomethingChanged = true;
+ 		}
+ 		private void DrawElSignalBackground_Part1(ref Graphics g, int pos)
+ 		{
+ 			Point[] points = {
+ 								 new Point(230+10, 77+(12-pos)*24),
+ 								 new Point(230+20, 77+(12-pos)*24+10),
+ 								 new Point(230+10, 77+(12-pos)*24+20),
+ 								 new Point(230, 77+(12-pos)*24+10)};
+ 			Point[] points2 = {
+ 								 new Point(230+10, 77+(12-pos)*24+1),
+ 								 new Point(230+19, 77+(12-pos)*24+10),
+ 								 new Point(230+10, 77+(12-pos)*24+19),
+ 								 new Point(230+1, 77+(12-pos)*24+10)};
+ 
+ 			g.FillPolygon(new SolidBrush(Color.Blue), points, FillMode.Alternate);
+ 		}
+ 		private void DrawElSignalBackground_Part2(ref Graphics g, int pos)
+ 		{
+ 			Point[] points = {
+ 								 new Point(230+10, 77+(12-pos)*24),
+ 								 new Point(230+20, 77+(12-pos)*24+10),
+ 								 new Point(230+10, 77+(12-pos)*24+20),
+ 								 new Point(230, 77+(12-pos)*24+10)};
+ 			Point[] points2 = {
+ 								  new Point(230+10, 77+(12-pos)*24+1),
+ 								  new Point(230+19, 77+(12-pos)*24+10),
+ 								  new Point(230+10, 77+(12-pos)*24+19),
+ 								  new Point(230+1, 77+(12-pos)*24+10)};
+ 
+ 			g.DrawPolygon(new Pen(Color.WhiteSmoke), points);
+ 			g.DrawPolygon(new Pen(Color.Black), points2);
  		}
      }


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000041.html">[Zusidisplay-cvs] zusidisplay AboutBox.cs,1.4,1.5 AboutBox.resx,1.3,1.4 AssemblyInfo.cs,1.3,1.4
</A></li>
	<LI>Next message: <A HREF="000043.html">[Zusidisplay-cvs] zusidisplay/EBuLaTools/Sound DxSound.cs,1.2,1.3 SoundInterface.cs,1.2,1.3 tonysound.cs,1.2,1.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#42">[ date ]</a>
              <a href="thread.html#42">[ thread ]</a>
              <a href="subject.html#42">[ subject ]</a>
              <a href="author.html#42">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/zusidisplay-cvs">More information about the Zusidisplay-cvs
mailing list</a><br>
</body></html>
