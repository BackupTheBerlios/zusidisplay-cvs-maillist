From nobody at sheep.berlios.de  Mon Jun  6 13:03:10 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:10 +0200
Subject: [Zusidisplay-cvs] zusidisplay/ET42X_ AssemblyInfo.cs,1.3,1.4
Message-ID: <200506061103.j56B39m12599@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/ET42X_
In directory sheep:/tmp/cvs-serv30397/ET42X_

Modified Files:
	AssemblyInfo.cs 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:34 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:07 -0000	1.4
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //



From nobody at sheep.berlios.de  Mon Jun  6 13:03:10 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:10 +0200
Subject: [Zusidisplay-cvs] zusidisplay/ice3 AssemblyInfo.cs,1.3,1.4
Message-ID: <200506061103.j56B3Am12612@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/ice3
In directory sheep:/tmp/cvs-serv30397/ice3

Modified Files:
	AssemblyInfo.cs 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ice3/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:35 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:08 -0000	1.4
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //



From nobody at sheep.berlios.de  Mon Jun  6 13:03:10 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:10 +0200
Subject: [Zusidisplay-cvs] zusidisplay/SystemTools AssemblyInfo.vb,1.3,1.4
Message-ID: <200506061103.j56B3Am12602@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/SystemTools
In directory sheep:/tmp/cvs-serv30397/SystemTools

Modified Files:
	AssemblyInfo.vb 
Log Message:
Version 1.6.5

Index: AssemblyInfo.vb
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/SystemTools/AssemblyInfo.vb,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.vb	26 May 2005 17:41:34 -0000	1.3
--- AssemblyInfo.vb	6 Jun 2005 11:03:07 -0000	1.4
***************
*** 30,32 ****
  ' zur?ckgreifen, indem Sie '*' wie unten angezeigt verwenden:
  
! <Assembly: AssemblyVersion("1.6.4.*")> 
--- 30,32 ----
  ' zur?ckgreifen, indem Sie '*' wie unten angezeigt verwenden:
  
! <Assembly: AssemblyVersion("1.6.5.*")> 



From nobody at sheep.berlios.de  Mon Jun  6 13:03:10 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:10 +0200
Subject: [Zusidisplay-cvs] zusidisplay/br185mmi AssemblyInfo.cs,1.3,1.4
Message-ID: <200506061103.j56B3Am12608@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/br185mmi
In directory sheep:/tmp/cvs-serv30397/br185mmi

Modified Files:
	AssemblyInfo.cs 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/br185mmi/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:35 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:08 -0000	1.4
***************
*** 26,30 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 26,30 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //



From nobody at sheep.berlios.de  Mon Jun  6 13:03:10 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:10 +0200
Subject: [Zusidisplay-cvs] zusidisplay/VT612 AssemblyInfo.cs,1.3,1.4
Message-ID: <200506061103.j56B3Am12605@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/VT612
In directory sheep:/tmp/cvs-serv30397/VT612

Modified Files:
	AssemblyInfo.cs 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/VT612/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:35 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:08 -0000	1.4
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //



From nobody at sheep.berlios.de  Mon Jun  6 13:03:09 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:09 +0200
Subject: [Zusidisplay-cvs] zusidisplay/David AssemblyInfo.cs,1.3,1.4
Message-ID: <200506061103.j56B39m12586@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/David
In directory sheep:/tmp/cvs-serv30397/David

Modified Files:
	AssemblyInfo.cs 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/David/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:32 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:06 -0000	1.4
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //



From nobody at sheep.berlios.de  Mon Jun  6 13:03:09 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:09 +0200
Subject: [Zusidisplay-cvs] zusidisplay/EBuLaTools AssemblyInfo.cs,1.3,1.4
Message-ID: <200506061103.j56B39m12592@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/EBuLaTools
In directory sheep:/tmp/cvs-serv30397/EBuLaTools

Modified Files:
	AssemblyInfo.cs 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLaTools/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:33 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:07 -0000	1.4
***************
*** 26,30 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 26,30 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //



From nobody at sheep.berlios.de  Mon Jun  6 13:03:09 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:09 +0200
Subject: [Zusidisplay-cvs] zusidisplay/EBuLa AssemblyInfo.cs,1.3,1.4 Control.cs,1.2,1.3 UserControl1.cs,1.3,1.4 UserControl1.resx,1.2,1.3
Message-ID: <200506061103.j56B39m12596@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/EBuLa
In directory sheep:/tmp/cvs-serv30397/EBuLa

Modified Files:
	AssemblyInfo.cs Control.cs UserControl1.cs UserControl1.resx 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:33 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:07 -0000	1.4
***************
*** 26,30 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 26,30 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //

Index: Control.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/Control.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** Control.cs	26 May 2005 17:41:33 -0000	1.2
--- Control.cs	6 Jun 2005 11:03:07 -0000	1.3
***************
*** 638,646 ****
  			DirectoryInfo di = new DirectoryInfo(path);
  			// Create an array representing the files in the current directory.
! 			FileInfo[] fi = di.GetFiles();
  			
  			train_list = new Hashtable();
! 			int counter = 0;
! 			
  
  			foreach (FileInfo fiTemp in fi)
--- 638,656 ----
  			DirectoryInfo di = new DirectoryInfo(path);
  			// Create an array representing the files in the current directory.
! 			FileInfo[] fi = null;
! 			try
! 			{
! 				fi = di.GetFiles();
! 			}
! 			catch(Exception){}
  			
+ 			if (fi == null)
+ 			{
+ 				MessageBox.Show("Keine Z?ge gefunden!", "Keine Z?ge", MessageBoxButtons.OK, MessageBoxIcon.Error);
+ 				return;
+ 			}
+ 
  			train_list = new Hashtable();
! 			int counter = 0;			
  
  			foreach (FileInfo fiTemp in fi)
***************
*** 664,668 ****
  
  				Application.DoEvents();
! 				l_top.Text = "Daten werden gelesen!".ToUpper() + " ("+ counter.ToString()+" von " + fi.Length.ToString()+ ")";
  				TrainInfo ti = new TrainInfo(fiTemp.Name, fiTemp.DirectoryName, XMLConf.SearchForDepAndArr);
  				Application.DoEvents();
--- 674,678 ----
  
  				Application.DoEvents();
! 				l_top.Text = "Laden ("+ counter.ToString()+" von " + fi.Length.ToString()+ ")";
  				TrainInfo ti = new TrainInfo(fiTemp.Name, fiTemp.DirectoryName, XMLConf.SearchForDepAndArr);
  				Application.DoEvents();

Index: UserControl1.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/UserControl1.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** UserControl1.cs	26 May 2005 17:41:33 -0000	1.3
--- UserControl1.cs	6 Jun 2005 11:03:07 -0000	1.4
***************
*** 172,176 ****
          private System.Windows.Forms.PictureBox PB_02;
          private System.Windows.Forms.PictureBox PB_01;
-         private System.Windows.Forms.PictureBox PB_13;
          private System.Windows.Forms.PictureBox PL_04;
          private System.Windows.Forms.PictureBox PL_01;
--- 172,175 ----
***************
*** 234,237 ****
--- 233,239 ----
  		private System.Windows.Forms.Label l_ESF_Pos;
  		private System.Windows.Forms.Label l_ESF_Neg;
+ 		private System.Windows.Forms.Label L_A_13;
+ 		private System.Windows.Forms.Label L_D_13;
+ 		private System.Windows.Forms.PictureBox PB_13;
  
          private MMI.EBuLa.Tools.SoundInterface Sound;
***************
*** 543,546 ****
--- 545,550 ----
  			this.l_ESF_Pos = new System.Windows.Forms.Label();
  			this.l_ESF_Neg = new System.Windows.Forms.Label();
+ 			this.L_A_13 = new System.Windows.Forms.Label();
+ 			this.L_D_13 = new System.Windows.Forms.Label();
  			((System.ComponentModel.ISupportInitialize)(this.timer_Uhr)).BeginInit();
  			this.PanelButton.SuspendLayout();
***************
*** 968,972 ****
  			this.L_TOP.Location = new System.Drawing.Point(232, 56);
  			this.L_TOP.Name = "L_TOP";
! 			this.L_TOP.Size = new System.Drawing.Size(384, 18);
  			this.L_TOP.TabIndex = 58;
  			this.L_TOP.Text = "L_TOP";
--- 972,976 ----
  			this.L_TOP.Location = new System.Drawing.Point(232, 56);
  			this.L_TOP.Name = "L_TOP";
! 			this.L_TOP.Size = new System.Drawing.Size(232, 18);
  			this.L_TOP.TabIndex = 58;
  			this.L_TOP.Text = "L_TOP";
***************
*** 1455,1459 ****
  			// 
  			this.L_OpsS_01.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_01.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_01.Location = new System.Drawing.Point(416, 344);
  			this.L_OpsS_01.Name = "L_OpsS_01";
--- 1459,1463 ----
  			// 
  			this.L_OpsS_01.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_01.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_01.Location = new System.Drawing.Point(416, 344);
  			this.L_OpsS_01.Name = "L_OpsS_01";
***************
*** 1461,1470 ****
  			this.L_OpsS_01.TabIndex = 107;
  			this.L_OpsS_01.Text = "L_OpsS_01";
- 			this.L_OpsS_01.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_02
  			// 
  			this.L_OpsS_02.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_02.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_02.Location = new System.Drawing.Point(416, 320);
  			this.L_OpsS_02.Name = "L_OpsS_02";
--- 1465,1473 ----
  			this.L_OpsS_01.TabIndex = 107;
  			this.L_OpsS_01.Text = "L_OpsS_01";
  			// 
  			// L_OpsS_02
  			// 
  			this.L_OpsS_02.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_02.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_02.Location = new System.Drawing.Point(416, 320);
  			this.L_OpsS_02.Name = "L_OpsS_02";
***************
*** 1472,1481 ****
  			this.L_OpsS_02.TabIndex = 109;
  			this.L_OpsS_02.Text = "L_OpsS_02";
- 			this.L_OpsS_02.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_03
  			// 
  			this.L_OpsS_03.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_03.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_03.Location = new System.Drawing.Point(416, 296);
  			this.L_OpsS_03.Name = "L_OpsS_03";
--- 1475,1483 ----
  			this.L_OpsS_02.TabIndex = 109;
  			this.L_OpsS_02.Text = "L_OpsS_02";
  			// 
  			// L_OpsS_03
  			// 
  			this.L_OpsS_03.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_03.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_03.Location = new System.Drawing.Point(416, 296);
  			this.L_OpsS_03.Name = "L_OpsS_03";
***************
*** 1483,1492 ****
  			this.L_OpsS_03.TabIndex = 110;
  			this.L_OpsS_03.Text = "L_OpsS_03";
- 			this.L_OpsS_03.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_04
  			// 
  			this.L_OpsS_04.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_04.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_04.Location = new System.Drawing.Point(416, 272);
  			this.L_OpsS_04.Name = "L_OpsS_04";
--- 1485,1493 ----
  			this.L_OpsS_03.TabIndex = 110;
  			this.L_OpsS_03.Text = "L_OpsS_03";
  			// 
  			// L_OpsS_04
  			// 
  			this.L_OpsS_04.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_04.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_04.Location = new System.Drawing.Point(416, 272);
  			this.L_OpsS_04.Name = "L_OpsS_04";
***************
*** 1494,1503 ****
  			this.L_OpsS_04.TabIndex = 111;
  			this.L_OpsS_04.Text = "L_OpsS_04";
- 			this.L_OpsS_04.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_05
  			// 
  			this.L_OpsS_05.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_05.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_05.Location = new System.Drawing.Point(416, 248);
  			this.L_OpsS_05.Name = "L_OpsS_05";
--- 1495,1503 ----
  			this.L_OpsS_04.TabIndex = 111;
  			this.L_OpsS_04.Text = "L_OpsS_04";
  			// 
  			// L_OpsS_05
  			// 
  			this.L_OpsS_05.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_05.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_05.Location = new System.Drawing.Point(416, 248);
  			this.L_OpsS_05.Name = "L_OpsS_05";
***************
*** 1505,1514 ****
  			this.L_OpsS_05.TabIndex = 112;
  			this.L_OpsS_05.Text = "L_OpsS_05";
- 			this.L_OpsS_05.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_06
  			// 
  			this.L_OpsS_06.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_06.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_06.Location = new System.Drawing.Point(416, 224);
  			this.L_OpsS_06.Name = "L_OpsS_06";
--- 1505,1513 ----
  			this.L_OpsS_05.TabIndex = 112;
  			this.L_OpsS_05.Text = "L_OpsS_05";
  			// 
  			// L_OpsS_06
  			// 
  			this.L_OpsS_06.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_06.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_06.Location = new System.Drawing.Point(416, 224);
  			this.L_OpsS_06.Name = "L_OpsS_06";
***************
*** 1516,1525 ****
  			this.L_OpsS_06.TabIndex = 113;
  			this.L_OpsS_06.Text = "L_OpsS_06";
- 			this.L_OpsS_06.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_07
  			// 
  			this.L_OpsS_07.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_07.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_07.Location = new System.Drawing.Point(416, 200);
  			this.L_OpsS_07.Name = "L_OpsS_07";
--- 1515,1523 ----
  			this.L_OpsS_06.TabIndex = 113;
  			this.L_OpsS_06.Text = "L_OpsS_06";
  			// 
  			// L_OpsS_07
  			// 
  			this.L_OpsS_07.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_07.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_07.Location = new System.Drawing.Point(416, 200);
  			this.L_OpsS_07.Name = "L_OpsS_07";
***************
*** 1527,1536 ****
  			this.L_OpsS_07.TabIndex = 114;
  			this.L_OpsS_07.Text = "L_OpsS_07";
- 			this.L_OpsS_07.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_08
  			// 
  			this.L_OpsS_08.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_08.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_08.Location = new System.Drawing.Point(416, 176);
  			this.L_OpsS_08.Name = "L_OpsS_08";
--- 1525,1533 ----
  			this.L_OpsS_07.TabIndex = 114;
  			this.L_OpsS_07.Text = "L_OpsS_07";
  			// 
  			// L_OpsS_08
  			// 
  			this.L_OpsS_08.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_08.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_08.Location = new System.Drawing.Point(416, 176);
  			this.L_OpsS_08.Name = "L_OpsS_08";
***************
*** 1538,1547 ****
  			this.L_OpsS_08.TabIndex = 115;
  			this.L_OpsS_08.Text = "L_OpsS_08";
- 			this.L_OpsS_08.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_09
  			// 
  			this.L_OpsS_09.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_09.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_09.Location = new System.Drawing.Point(416, 152);
  			this.L_OpsS_09.Name = "L_OpsS_09";
--- 1535,1543 ----
  			this.L_OpsS_08.TabIndex = 115;
  			this.L_OpsS_08.Text = "L_OpsS_08";
  			// 
  			// L_OpsS_09
  			// 
  			this.L_OpsS_09.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_09.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_09.Location = new System.Drawing.Point(416, 152);
  			this.L_OpsS_09.Name = "L_OpsS_09";
***************
*** 1549,1558 ****
  			this.L_OpsS_09.TabIndex = 116;
  			this.L_OpsS_09.Text = "L_OpsS_09";
- 			this.L_OpsS_09.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_10
  			// 
  			this.L_OpsS_10.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_10.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_10.Location = new System.Drawing.Point(416, 128);
  			this.L_OpsS_10.Name = "L_OpsS_10";
--- 1545,1553 ----
  			this.L_OpsS_09.TabIndex = 116;
  			this.L_OpsS_09.Text = "L_OpsS_09";
  			// 
  			// L_OpsS_10
  			// 
  			this.L_OpsS_10.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_10.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_10.Location = new System.Drawing.Point(416, 128);
  			this.L_OpsS_10.Name = "L_OpsS_10";
***************
*** 1560,1569 ****
  			this.L_OpsS_10.TabIndex = 117;
  			this.L_OpsS_10.Text = "L_OpsS_10";
- 			this.L_OpsS_10.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_11
  			// 
  			this.L_OpsS_11.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_11.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_11.Location = new System.Drawing.Point(416, 104);
  			this.L_OpsS_11.Name = "L_OpsS_11";
--- 1555,1563 ----
  			this.L_OpsS_10.TabIndex = 117;
  			this.L_OpsS_10.Text = "L_OpsS_10";
  			// 
  			// L_OpsS_11
  			// 
  			this.L_OpsS_11.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_11.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_11.Location = new System.Drawing.Point(416, 104);
  			this.L_OpsS_11.Name = "L_OpsS_11";
***************
*** 1571,1580 ****
  			this.L_OpsS_11.TabIndex = 118;
  			this.L_OpsS_11.Text = "L_OpsS_11";
- 			this.L_OpsS_11.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// L_OpsS_12
  			// 
  			this.L_OpsS_12.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_12.Font = new System.Drawing.Font("Arial", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_12.Location = new System.Drawing.Point(416, 80);
  			this.L_OpsS_12.Name = "L_OpsS_12";
--- 1565,1573 ----
  			this.L_OpsS_11.TabIndex = 118;
  			this.L_OpsS_11.Text = "L_OpsS_11";
  			// 
  			// L_OpsS_12
  			// 
  			this.L_OpsS_12.BackColor = System.Drawing.Color.Transparent;
! 			this.L_OpsS_12.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
  			this.L_OpsS_12.Location = new System.Drawing.Point(416, 80);
  			this.L_OpsS_12.Name = "L_OpsS_12";
***************
*** 1582,1586 ****
  			this.L_OpsS_12.TabIndex = 108;
  			this.L_OpsS_12.Text = "L_OpsS_12";
- 			this.L_OpsS_12.TextAlign = System.Drawing.ContentAlignment.BottomLeft;
  			// 
  			// Qu
--- 1575,1578 ----
***************
*** 2372,2378 ****
--- 2364,2392 ----
  			this.l_ESF_Neg.TextAlign = System.Drawing.ContentAlignment.TopRight;
  			// 
+ 			// L_A_13
+ 			// 
+ 			this.L_A_13.Font = new System.Drawing.Font("Arial", 11.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
+ 			this.L_A_13.Location = new System.Drawing.Point(480, 56);
+ 			this.L_A_13.Name = "L_A_13";
+ 			this.L_A_13.Size = new System.Drawing.Size(50, 18);
+ 			this.L_A_13.TabIndex = 182;
+ 			this.L_A_13.Text = "L_A_13";
+ 			this.L_A_13.TextAlign = System.Drawing.ContentAlignment.TopRight;
+ 			// 
+ 			// L_D_13
+ 			// 
+ 			this.L_D_13.Font = new System.Drawing.Font("Arial", 11.25F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
+ 			this.L_D_13.Location = new System.Drawing.Point(560, 56);
+ 			this.L_D_13.Name = "L_D_13";
+ 			this.L_D_13.Size = new System.Drawing.Size(50, 18);
+ 			this.L_D_13.TabIndex = 183;
+ 			this.L_D_13.Text = "L_D_13";
+ 			this.L_D_13.TextAlign = System.Drawing.ContentAlignment.TopRight;
+ 			// 
  			// EbulaControl
  			// 
  			this.BackColor = System.Drawing.Color.WhiteSmoke;
+ 			this.Controls.Add(this.L_D_13);
+ 			this.Controls.Add(this.L_A_13);
  			this.Controls.Add(this.l_ESF_Neg);
  			this.Controls.Add(this.l_ESF_Pos);
***************
*** 2781,2785 ****
                          speed = (int)s;
                          pb.Location = new Point( speed , cc.Location.Y-firsttime);
!                         //Console.WriteLine("New Loc: "+cc.Location.X.ToString()+","+cc.Location.Y.ToString());
                      }
                      if (cc.Name.StartsWith("PL"))
--- 2795,2802 ----
                          speed = (int)s;
                          pb.Location = new Point( speed , cc.Location.Y-firsttime);
! 						if (s > 0d && cc.Name.IndexOf("13") < 0) 
! 							pb.Visible = true;
! 						else
! 							pb.Visible = false;
                      }
                      if (cc.Name.StartsWith("PL"))
***************
*** 2896,2905 ****
                          if (e == control.Marker || e.m_type == EntryType.RADIO_MARKER)
                          { 
!                             l.Font = new System.Drawing.Font("Tahoma", 9.75F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
                              //l.Font.Bold = true;
                          }
                          else 
                          { 
!                             l.Font = new System.Drawing.Font("Tahoma", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
                              //l.Font.Bold = false; 
                          }
--- 2913,2922 ----
                          if (e == control.Marker || e.m_type == EntryType.RADIO_MARKER)
                          { 
!                             l.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
                              //l.Font.Bold = true;
                          }
                          else 
                          { 
!                             l.Font = new System.Drawing.Font("Zusi standard", 9.75F, System.Drawing.FontStyle.Regular, System.Drawing.GraphicsUnit.Point, ((System.Byte)(0)));
                              //l.Font.Bold = false; 
                          }
***************
*** 2963,2973 ****
                          int pos = System.Convert.ToInt32(cc.Name.Substring(4));
                          Label l = (Label)cc;
                          if (pos > control.Route.Entrys.Count)
                          {
!                             l.Text = "";
                              continue;
                          }
!                         Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
!                         l.Text = e.m_eta;
                      }
                      if (cc.Name.StartsWith("L_AK_"))
--- 2980,2995 ----
                          int pos = System.Convert.ToInt32(cc.Name.Substring(4));
                          Label l = (Label)cc;
+ 						l.Text = "";
                          if (pos > control.Route.Entrys.Count)
                          {
!                             //l.Text = "";
                              continue;
                          }
! 						try
! 						{
! 							Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
! 							l.Text = e.m_eta;
! 						}
! 						catch(Exception){}                        
                      }
                      if (cc.Name.StartsWith("L_AK_"))
***************
*** 2996,3006 ****
                          int pos = System.Convert.ToInt32(cc.Name.Substring(4));
                          Label l = (Label)cc;
                          if (pos > control.Route.Entrys.Count)
                          {
!                             l.Text = "";
                              continue;
                          }
!                         Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
!                         l.Text = e.m_etd;
                      }
                      if (cc.Name.StartsWith("L_DK_"))
--- 3018,3033 ----
                          int pos = System.Convert.ToInt32(cc.Name.Substring(4));
                          Label l = (Label)cc;
+ 						l.Text = "";
                          if (pos > control.Route.Entrys.Count)
                          {
!                             //l.Text = "";
                              continue;
                          }
! 						try
! 						{
! 							Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
! 							l.Text = e.m_etd;
! 						}
! 						catch(Exception){}
                      }
                      if (cc.Name.StartsWith("L_DK_"))
***************
*** 3692,3696 ****
  				{
  					// Timer deaktiviert
! 					if (L_TOP.Text == "Kein Zusi gefunden! Stelle um auf stand-alone Betrieb!")
  						L_TOP.Text = "";
  					//timer_Sync.Enabled = false;
--- 3719,3723 ----
  				{
  					// Timer deaktiviert
! 					if (L_TOP.Text == "Kein Zusi gefunden! stand-alone!")
  						L_TOP.Text = "";
  					//timer_Sync.Enabled = false;
***************
*** 3701,3705 ****
  			{
  				//timer_Sync.Enabled = false;
! 				if (L_TOP.Text == "Kein Zusi gefunden! Stelle um auf stand-alone Betrieb!")
  					L_TOP.Text = "";
  				System.Windows.Forms.MessageBox.Show("Control nicht da!");
--- 3728,3732 ----
  			{
  				//timer_Sync.Enabled = false;
! 				if (L_TOP.Text == "Kein Zusi gefunden! stand-alone!")
  					L_TOP.Text = "";
  				System.Windows.Forms.MessageBox.Show("Control nicht da!");
***************
*** 3729,3733 ****
  						control.timer_disabled = true;
  					}
! 					L_TOP.Text = "Kein Zusi gefunden! Stelle um auf stand-alone Betrieb!";
  					return;
  				}
--- 3756,3760 ----
  						control.timer_disabled = true;
  					}
! 					L_TOP.Text = "Kein Zusi gefunden! stand-alone!";
  					return;
  				}

Index: UserControl1.resx
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/UserControl1.resx,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** UserControl1.resx	26 May 2005 17:41:33 -0000	1.2
--- UserControl1.resx	6 Jun 2005 11:03:07 -0000	1.3
***************
*** 134,143 ****
      <value>Private</value>
    </data>
-   <data name="L_Valid.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
-     <value>False</value>
-   </data>
    <data name="L_Valid.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
    <data name="L_Valid.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
--- 134,143 ----
      <value>Private</value>
    </data>
    <data name="L_Valid.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
+   <data name="L_Valid.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>False</value>
+   </data>
    <data name="L_Valid.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
***************
*** 287,296 ****
      <value>Private</value>
    </data>
-   <data name="L_Speed_08.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
-     <value>False</value>
-   </data>
    <data name="L_Speed_08.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
    <data name="L_Speed_08.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
--- 287,296 ----
      <value>Private</value>
    </data>
    <data name="L_Speed_08.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
+   <data name="L_Speed_08.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>False</value>
+   </data>
    <data name="L_Speed_08.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
***************
*** 1067,1074 ****
      <value>False</value>
    </data>
!   <data name="PB_12.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="PB_12.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
--- 1067,1074 ----
      <value>False</value>
    </data>
!   <data name="PB_12.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="PB_12.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
***************
*** 1364,1371 ****
      <value>False</value>
    </data>
!   <data name="PB_01.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="PB_01.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
--- 1364,1371 ----
      <value>False</value>
    </data>
!   <data name="PB_01.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="PB_01.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
***************
*** 2027,2030 ****
--- 2027,2033 ----
      <value>Private</value>
    </data>
+   <data name="B_G.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
    <data name="B_G.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
***************
*** 2033,2039 ****
      <value>Private</value>
    </data>
-   <data name="B_G.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
-     <value>Private</value>
-   </data>
    <data name="B_GNT.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
--- 2036,2039 ----
***************
*** 2660,2663 ****
--- 2660,2684 ----
      <value>Private</value>
    </data>
+   <data name="L_A_13.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>False</value>
+   </data>
+   <data name="L_A_13.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="L_A_13.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="L_D_13.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>False</value>
+   </data>
+   <data name="L_D_13.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="L_D_13.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="$this.Name">
+     <value>EbulaControl</value>
+   </data>
    <data name="$this.TrayLargeIcon" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
***************
*** 2677,2683 ****
    <data name="$this.Language" type="System.Globalization.CultureInfo, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>(Default)</value>
-   </data>
-   <data name="$this.Name">
-     <value>EbulaControl</value>
    </data>
    <data name="$this.Localizable" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
--- 2698,2701 ----



From nobody at sheep.berlios.de  Mon Jun  6 13:03:09 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:09 +0200
Subject: [Zusidisplay-cvs] zusidisplay/Diagnose AssemblyInfo.cs,1.3,1.4 DIAGNOSEControl.cs,1.4,1.5 State.cs,1.4,1.5
Message-ID: <200506061103.j56B39m12587@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/Diagnose
In directory sheep:/tmp/cvs-serv30397/Diagnose

Modified Files:
	AssemblyInfo.cs DIAGNOSEControl.cs State.cs 
Log Message:
Version 1.6.5

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/Diagnose/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:33 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:06 -0000	1.4
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //

Index: DIAGNOSEControl.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/Diagnose/DIAGNOSEControl.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** DIAGNOSEControl.cs	26 May 2005 17:41:33 -0000	1.4
--- DIAGNOSEControl.cs	6 Jun 2005 11:03:06 -0000	1.5
***************
*** 585,588 ****
--- 585,592 ----
  			switch(localstate.DISPLAY)
  			{
+ 				case CURRENT_DISPLAY.Z_BR:
+ 					if (localstate.type == TRAIN_TYPE.BR182)
+ 						localstate.SPUS = !localstate.SPUS;
+ 					break;
  				case CURRENT_DISPLAY.Zugbesy:
  					localstate.DISPLAY = CURRENT_DISPLAY.DSK;
***************
*** 1208,1212 ****
  			TimeSpan span = new TimeSpan(DateTime.Now.Ticks - lastTime.Ticks);
  
! 			if (span.TotalMilliseconds < 100)
  			{
  				lastTime = DateTime.Now;
--- 1212,1216 ----
  			TimeSpan span = new TimeSpan(DateTime.Now.Ticks - lastTime.Ticks);
  
! 			if (span.TotalMilliseconds < 400)
  			{
  				lastTime = DateTime.Now;
***************
*** 3723,3727 ****
  						buttons[6,0] = ""; buttons[6,1] = "";
  						buttons[7,0] = ""; buttons[7,1] = "";
! 						buttons[8,0] = "Ein-"; buttons[8,1] = "gabe";
  						buttons[9,0] = ""; buttons[9,1] = "";
  						buttons[10,0] = "   G"; buttons[10,1] = "";
--- 3727,3731 ----
  						buttons[6,0] = ""; buttons[6,1] = "";
  						buttons[7,0] = ""; buttons[7,1] = "";
! 						buttons[8,0] = " Ein-"; buttons[8,1] = "gabe";
  						buttons[9,0] = ""; buttons[9,1] = "";
  						buttons[10,0] = "   G"; buttons[10,1] = "";
***************
*** 3734,3739 ****
  						buttons[5,0] = ""; buttons[5,1] = "";
  						buttons[6,0] = ""; buttons[6,1] = "";
! 						buttons[7,0] = ""; buttons[7,1] = "";
! 						buttons[8,0] = "Ein-"; buttons[8,1] = "gabe";
  						buttons[9,0] = ""; buttons[9,1] = "";
  						buttons[10,0] = ""; buttons[10,1] = "";
--- 3738,3747 ----
  						buttons[5,0] = ""; buttons[5,1] = "";
  						buttons[6,0] = ""; buttons[6,1] = "";
! 						buttons[7,0] = "SPUS"; 
! 						if (localstate.SPUS)
! 							buttons[7,1] = "  aus";
! 						else
! 							buttons[7,1] = "  ein";
! 						buttons[8,0] = " Ein-"; buttons[8,1] = "gabe";
  						buttons[9,0] = ""; buttons[9,1] = "";
  						buttons[10,0] = ""; buttons[10,1] = "";
***************
*** 4030,4033 ****
--- 4038,4043 ----
  
  			// Feld 4: Zugsammelschiene
+ 			f = new Font("Arial", 5f, FontStyle.Bold, GraphicsUnit.Millimeter);
+ 			pg.DrawString("1000 V", f, Brushes.WhiteSmoke, 290, 388);
  
  			// Feld 5: Bremse
***************
*** 4046,4049 ****
--- 4056,4073 ----
  				pg.FillPolygon(Brushes.WhiteSmoke, p1);
  				pg.FillPolygon(Brushes.WhiteSmoke, p2);
+ 			}
+ 
+ 			f = new Font("Arial", 5.7f, FontStyle.Bold, GraphicsUnit.Millimeter);
+ 			if (localstate.Bremsstellung == BREMSSTELLUNG.R_Mg || localstate.Bremsstellung == BREMSSTELLUNG.R)
+ 			{
+ 				pg.DrawString("R", f, Brushes.WhiteSmoke, 393, 363);
+ 			}
+ 			else if (localstate.Bremsstellung == BREMSSTELLUNG.P_Mg || localstate.Bremsstellung == BREMSSTELLUNG.P)
+ 			{
+ 				pg.DrawString("P", f, Brushes.Gold, 394, 363);
+ 			}
+ 			else if (localstate.Bremsstellung == BREMSSTELLUNG.G)
+ 			{
+ 				pg.DrawString("G", f, Brushes.Red, 393, 363);
  			}
  

Index: State.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/Diagnose/State.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** State.cs	26 May 2005 17:41:33 -0000	1.4
--- State.cs	6 Jun 2005 11:03:06 -0000	1.5
***************
*** 44,47 ****
--- 44,48 ----
  		public float C_Druck = 0f;
  
+ 		public bool SPUS = true;
  
  		public St?rungsManager st?rungmgr = new St?rungsManager();



From nobody at sheep.berlios.de  Mon Jun  6 13:03:38 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Mon, 6 Jun 2005 13:03:38 +0200
Subject: [Zusidisplay-cvs] zusidisplay AboutBox.cs,1.4,1.5 AboutBox.resx,1.3,1.4 AssemblyInfo.cs,1.3,1.4
Message-ID: <200506061103.j56B3cm12632@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay
In directory sheep:/tmp/cvs-serv30397

Modified Files:
	AboutBox.cs AboutBox.resx AssemblyInfo.cs 
Log Message:
Version 1.6.5

Index: AboutBox.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/AboutBox.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AboutBox.cs	26 May 2005 17:41:32 -0000	1.4
--- AboutBox.cs	6 Jun 2005 11:03:03 -0000	1.5
***************
*** 34,37 ****
--- 34,38 ----
  		private System.Windows.Forms.Label label14;
  		private System.Windows.Forms.Label label7;
+ 		private System.Windows.Forms.Label l_NET_version;
  		/// <summary>
  		/// Erforderliche Designervariable.
***************
*** 50,53 ****
--- 51,56 ----
  			//
  			l_version.Text = "Version: "+version;
+ 			l_NET_version.Text = ".NET Version: "+Environment.Version.Major+"."+Environment.Version.Minor+"."+Environment.Version.Build;
+ 			if (Environment.Version.Revision > 2031) l_NET_version.Text += " SP1";
  			this.TopMost = topmost;
  
***************
*** 92,95 ****
--- 95,99 ----
  			this.l_version = new System.Windows.Forms.Label();
  			this.groupBox1 = new System.Windows.Forms.GroupBox();
+ 			this.label7 = new System.Windows.Forms.Label();
  			this.label13 = new System.Windows.Forms.Label();
  			this.label12 = new System.Windows.Forms.Label();
***************
*** 110,114 ****
  			this.linkLabel3 = new System.Windows.Forms.LinkLabel();
  			this.label14 = new System.Windows.Forms.Label();
! 			this.label7 = new System.Windows.Forms.Label();
  			this.groupBox1.SuspendLayout();
  			this.SuspendLayout();
--- 114,118 ----
  			this.linkLabel3 = new System.Windows.Forms.LinkLabel();
  			this.label14 = new System.Windows.Forms.Label();
! 			this.l_NET_version = new System.Windows.Forms.Label();
  			this.groupBox1.SuspendLayout();
  			this.SuspendLayout();
***************
*** 127,131 ****
  			this.l_version.Location = new System.Drawing.Point(24, 48);
  			this.l_version.Name = "l_version";
! 			this.l_version.Size = new System.Drawing.Size(240, 16);
  			this.l_version.TabIndex = 1;
  			this.l_version.Text = "Version: xxxx";
--- 131,135 ----
  			this.l_version.Location = new System.Drawing.Point(24, 48);
  			this.l_version.Name = "l_version";
! 			this.l_version.Size = new System.Drawing.Size(152, 16);
  			this.l_version.TabIndex = 1;
  			this.l_version.Text = "Version: xxxx";
***************
*** 150,153 ****
--- 154,165 ----
  			this.groupBox1.Text = "Folgende Module sind installiert:";
  			// 
+ 			// label7
+ 			// 
+ 			this.label7.Location = new System.Drawing.Point(16, 120);
+ 			this.label7.Name = "label7";
+ 			this.label7.Size = new System.Drawing.Size(184, 16);
+ 			this.label7.TabIndex = 11;
+ 			this.label7.Text = "FT95 FIS Terminal (alpha)";
+ 			// 
  			// label13
  			// 
***************
*** 307,317 ****
  			this.label14.Click += new System.EventHandler(this.label14_Click);
  			// 
! 			// label7
  			// 
! 			this.label7.Location = new System.Drawing.Point(16, 120);
! 			this.label7.Name = "label7";
! 			this.label7.Size = new System.Drawing.Size(184, 16);
! 			this.label7.TabIndex = 11;
! 			this.label7.Text = "FT95 FIS Terminal (alpha)";
  			// 
  			// AboutBox
--- 319,329 ----
  			this.label14.Click += new System.EventHandler(this.label14_Click);
  			// 
! 			// l_NET_version
  			// 
! 			this.l_NET_version.Location = new System.Drawing.Point(176, 48);
! 			this.l_NET_version.Name = "l_NET_version";
! 			this.l_NET_version.Size = new System.Drawing.Size(240, 16);
! 			this.l_NET_version.TabIndex = 17;
! 			this.l_NET_version.Text = ".NET Version: xxxx";
  			// 
  			// AboutBox
***************
*** 319,322 ****
--- 331,335 ----
  			this.AutoScaleBaseSize = new System.Drawing.Size(5, 14);
  			this.ClientSize = new System.Drawing.Size(450, 480);
+ 			this.Controls.Add(this.l_NET_version);
  			this.Controls.Add(this.linkLabel3);
  			this.Controls.Add(this.linkLabel2);

Index: AboutBox.resx
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/AboutBox.resx,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AboutBox.resx	26 May 2005 17:41:32 -0000	1.3
--- AboutBox.resx	6 Jun 2005 11:03:05 -0000	1.4
***************
*** 134,137 ****
--- 134,146 ----
      <value>Private</value>
    </data>
+   <data name="label7.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>False</value>
+   </data>
+   <data name="label7.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="label7.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
    <data name="label13.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
***************
*** 296,306 ****
      <value>Private</value>
    </data>
!   <data name="label7.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
    </data>
!   <data name="label7.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="label7.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
--- 305,315 ----
      <value>Private</value>
    </data>
!   <data name="l_NET_version.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
    </data>
!   <data name="l_NET_version.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="l_NET_version.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
***************
*** 314,317 ****
--- 323,329 ----
      <value>False</value>
    </data>
+   <data name="$this.Name">
+     <value>AboutBox</value>
+   </data>
    <data name="$this.Localizable" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
***************
*** 319,325 ****
    <data name="$this.GridSize" type="System.Drawing.Size, System.Drawing, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
      <value>8, 8</value>
-   </data>
-   <data name="$this.Name">
-     <value>AboutBox</value>
    </data>
    <data name="$this.DrawGrid" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
--- 331,334 ----

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/AssemblyInfo.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** AssemblyInfo.cs	26 May 2005 17:41:32 -0000	1.3
--- AssemblyInfo.cs	6 Jun 2005 11:03:05 -0000	1.4
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.4.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //



From nobody at sheep.berlios.de  Tue Jun  7 16:09:47 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 7 Jun 2005 16:09:47 +0200
Subject: [Zusidisplay-cvs] zusidisplay/EBuLa Control.cs,1.3,1.4 Enum.cs,1.2,1.3 UserControl1.cs,1.4,1.5
Message-ID: <200506071409.j57E9l132342@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/EBuLa
In directory sheep:/tmp/cvs-serv12919/EBuLa

Modified Files:
	Control.cs Enum.cs UserControl1.cs 
Log Message:
EBuLa: El und Ne Signale begonnen

Index: Control.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/Control.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** Control.cs	6 Jun 2005 11:03:07 -0000	1.3
--- Control.cs	7 Jun 2005 14:09:44 -0000	1.4
***************
*** 366,369 ****
--- 366,453 ----
  				}
  
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("ne2");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("ne 2");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("ne4");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("ne 4");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.NE4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("el1");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL1;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("el 1");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL1;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("el2");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("el 2");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL2;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("el4");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("ne 4");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL4;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("el5");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL5;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 3);
+ 				}
+ 
+ 				pos = this_e.m_ops_name.ToLower().IndexOf("el 5");
+ 				if (pos >= 0)
+ 				{
+ 					this_e.m_type = EntryType.EL5;
+ 					this_e.m_ops_name = this_e.m_ops_name.Remove(pos, 4);
+ 				}
+ 
  				// Zugfunk
  				pos = this_e.m_ops_name.IndexOf("ZF");

Index: Enum.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/Enum.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** Enum.cs	26 May 2005 17:41:33 -0000	1.2
--- Enum.cs	7 Jun 2005 14:09:44 -0000	1.3
***************
*** 6,10 ****
          LZB_BEGINNING, LZB, LZB_ENDING,
          TUNNEL_BEGINNING, TUNNEL_ENDING,
!         POSITION_JUMP, VERKUERTZT
      }
      public enum EntryPos
--- 6,11 ----
          LZB_BEGINNING, LZB, LZB_ENDING,
          TUNNEL_BEGINNING, TUNNEL_ENDING,
!         POSITION_JUMP, VERKUERTZT,
! 		NE2, NE4, EL1, EL2, EL4, EL5
      }
      public enum EntryPos

Index: UserControl1.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLa/UserControl1.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** UserControl1.cs	6 Jun 2005 11:03:07 -0000	1.4
--- UserControl1.cs	7 Jun 2005 14:09:44 -0000	1.5
***************
*** 2872,2878 ****
  
                          Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
!                         if (e.m_type == EntryType.RADIO_MARKER || e.m_type == EntryType.RADIO_MARKER_ENDING || e.m_type == EntryType.GNT_BEGINNING || e.m_type == EntryType.GNT_ENDING || e.m_type == EntryType.LZB_BEGINNING || e.m_type == EntryType.LZB || e.m_type == EntryType.LZB_ENDING || e.m_type == EntryType.VERKUERTZT)
                          { 
! 							if (e.m_type != EntryType.RADIO_MARKER && e.m_type != EntryType.RADIO_MARKER_ENDING && e.m_type != EntryType.VERKUERTZT)
  							{
  								l.Text = "";
--- 2872,2898 ----
  
                          Entry e = (Entry)control.Route.Entrys[pos-1+(int)control.Route.Offset];
!                         if (e.m_type == EntryType.RADIO_MARKER || 
! 							e.m_type == EntryType.RADIO_MARKER_ENDING || 
! 							e.m_type == EntryType.GNT_BEGINNING || 
! 							e.m_type == EntryType.GNT_ENDING || 
! 							e.m_type == EntryType.LZB_BEGINNING || 
! 							e.m_type == EntryType.LZB || 
! 							e.m_type == EntryType.LZB_ENDING || 
! 							e.m_type == EntryType.NE2 ||
! 							e.m_type == EntryType.NE4 ||
! 							e.m_type == EntryType.EL1 ||
! 							e.m_type == EntryType.EL2 ||
! 							e.m_type == EntryType.EL4 ||
! 							e.m_type == EntryType.EL5)
                          { 
! 							if (e.m_type != EntryType.RADIO_MARKER && 
! 								e.m_type != EntryType.RADIO_MARKER_ENDING && 
! 								e.m_type != EntryType.VERKUERTZT &&
! 								e.m_type != EntryType.NE2 &&
! 								e.m_type != EntryType.NE4 &&
! 								e.m_type != EntryType.EL1 &&
! 								e.m_type != EntryType.EL2 &&
! 								e.m_type != EntryType.EL4 &&
! 								e.m_type != EntryType.EL5)
  							{
  								l.Text = "";
***************
*** 4047,4050 ****
--- 4067,4072 ----
  						s = "";
  						break;
+ 					default:
+ 						break;
  				}
  
***************
*** 4075,4079 ****
--- 4097,4156 ----
  					}
  				}
+ 				else if (type == EntryType.NE2)
+ 				{
+ 					//S8090.txt
+ 					//230, 78+(12-pos)*24 
+ 					g.DrawRectangle(new Pen(BLACK), 230+2, 77+(12-pos)*24, 16, 20);
+ 
+ 					Pen pen = new Pen(BLACK, 1f);
+ 					g.DrawLine(pen, new Point(230+2, 77+(12-pos)*24), new Point(230+2+8, 77+(12-pos)*24+9));
+ 					g.DrawLine(pen, new Point(230+2+8, 77+(12-pos)*24+9), new Point(230+2+16, 77+(12-pos)*24));
  
+ 					g.DrawLine(pen, new Point(230+2, 77+(12-pos)*24+20), new Point(230+2+8, 77+(12-pos)*24+11));
+ 					g.DrawLine(pen, new Point(230+2+16, 77+(12-pos)*24+20), new Point(230+2+8, 77+(12-pos)*24+11));
+ 
+ 				}
+ 				else if (type == EntryType.NE4)
+ 				{
+ 					g.DrawRectangle(new Pen(BLACK), 230+2, 77+(12-pos)*24, 16, 20);
+ 					if (control.inverse)
+ 					{
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2+8, 77+(12-pos)*24, 8, 10);
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2, 77+(12-pos)*24+10, 8, 10);
+ 					}
+ 					else
+ 					{
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2, 77+(12-pos)*24, 8, 10);
+ 						g.FillRectangle(new SolidBrush(BLACK), 230+2+8, 77+(12-pos)*24+10, 8, 10);
+ 					}
+ 				}
+ 				else if (type == EntryType.EL1)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
+ 				else if (type == EntryType.EL2)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
+ 				else if (type == EntryType.EL4)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					Pen el_pen = new Pen(Color.WhiteSmoke, 3f);
+ 					el_pen.EndCap = LineCap.Triangle;
+ 					el_pen.StartCap = LineCap.Triangle;
+ 					g.DrawLine(el_pen, 232, 77+(12-pos)*24+10, 231+18, 77+(12-pos)*24+10);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
+ 				else if (type == EntryType.EL5)
+ 				{
+ 					DrawElSignalBackground_Part1(ref g, pos);
+ 					Pen el_pen = new Pen(Color.WhiteSmoke, 3f);
+ 					el_pen.EndCap = LineCap.Triangle;
+ 					el_pen.StartCap = LineCap.Triangle;
+ 					g.DrawLine(el_pen, 231+9, 77+(12-pos)*24+1, 231+9, 77+(12-pos)*24+18);
+ 					DrawElSignalBackground_Part2(ref g, pos);
+ 				}
  			}
  
***************
*** 4130,4133 ****
--- 4207,4241 ----
  			m_conf.FastReadFile();
  			SomethingChanged = true;
+ 		}
+ 		private void DrawElSignalBackground_Part1(ref Graphics g, int pos)
+ 		{
+ 			Point[] points = {
+ 								 new Point(230+10, 77+(12-pos)*24),
+ 								 new Point(230+20, 77+(12-pos)*24+10),
+ 								 new Point(230+10, 77+(12-pos)*24+20),
+ 								 new Point(230, 77+(12-pos)*24+10)};
+ 			Point[] points2 = {
+ 								 new Point(230+10, 77+(12-pos)*24+1),
+ 								 new Point(230+19, 77+(12-pos)*24+10),
+ 								 new Point(230+10, 77+(12-pos)*24+19),
+ 								 new Point(230+1, 77+(12-pos)*24+10)};
+ 
+ 			g.FillPolygon(new SolidBrush(Color.Blue), points, FillMode.Alternate);
+ 		}
+ 		private void DrawElSignalBackground_Part2(ref Graphics g, int pos)
+ 		{
+ 			Point[] points = {
+ 								 new Point(230+10, 77+(12-pos)*24),
+ 								 new Point(230+20, 77+(12-pos)*24+10),
+ 								 new Point(230+10, 77+(12-pos)*24+20),
+ 								 new Point(230, 77+(12-pos)*24+10)};
+ 			Point[] points2 = {
+ 								  new Point(230+10, 77+(12-pos)*24+1),
+ 								  new Point(230+19, 77+(12-pos)*24+10),
+ 								  new Point(230+10, 77+(12-pos)*24+19),
+ 								  new Point(230+1, 77+(12-pos)*24+10)};
+ 
+ 			g.DrawPolygon(new Pen(Color.WhiteSmoke), points);
+ 			g.DrawPolygon(new Pen(Color.Black), points2);
  		}
      }



From nobody at sheep.berlios.de  Tue Jun 14 13:25:31 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:31 +0200
Subject: [Zusidisplay-cvs] zusidisplay/EBuLaTools/Sound DxSound.cs,1.2,1.3 SoundInterface.cs,1.2,1.3 tonysound.cs,1.2,1.3
Message-ID: <200506141125.j5EBPV128500@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/EBuLaTools/Sound
In directory sheep:/tmp/cvs-serv30727/EBuLaTools/Sound

Modified Files:
	DxSound.cs SoundInterface.cs tonysound.cs 
Log Message:
Stand: 1.7.0-test3

Index: DxSound.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLaTools/Sound/DxSound.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** DxSound.cs	9 Mar 2005 10:52:20 -0000	1.2
--- DxSound.cs	14 Jun 2005 11:25:28 -0000	1.3
***************
*** 71,74 ****
--- 71,85 ----
  		}
  
+ 		public void PlaySoundFromFile(string filename)
+ 		{
+ 			try
+ 			{	
+ 				Audio a = Audio.FromFile(filename);
+ 				a.Play();
+ 				System.Threading.Thread.Sleep(200);
+ 			}
+ 			catch(Exception){}
+ 		}
+ 
  		/*
  		 * CODE BELOW FOR DIRECT-SOUND 9

Index: SoundInterface.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLaTools/Sound/SoundInterface.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** SoundInterface.cs	9 Mar 2005 10:52:20 -0000	1.2
--- SoundInterface.cs	14 Jun 2005 11:25:28 -0000	1.3
***************
*** 35,38 ****
--- 35,43 ----
  		/// </summary>
  		void PlayWBFreigabe();
+ 
+ 		/// <summary>
+ 		/// Play given file 
+ 		/// </summary>
+ 		void PlaySoundFromFile(string filename);
  	}
  }

Index: tonysound.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLaTools/Sound/tonysound.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** tonysound.cs	9 Mar 2005 10:52:20 -0000	1.2
--- tonysound.cs	14 Jun 2005 11:25:28 -0000	1.3
***************
*** 72,75 ****
--- 72,85 ----
  		}
  
+ 		public void PlaySoundFromFile(string filename)
+ 		{
+ 			try
+ 			{
+ 				if (System.IO.Path.GetExtension(filename).ToLower() == "wav")
+ 					PlaySound(filename, IntPtr.Zero, PlaySoundFlags.SND_ASYNC & PlaySoundFlags.SND_NOSTOP);
+ 			}
+ 			catch(Exception) {}
+ 		}
+ 
  		[DllImport("winmm.dll")] //inports the winmm.dll used for sound
  		private static extern bool PlaySound( string szSound, IntPtr hMod, PlaySoundFlags flags );
***************
*** 98,101 ****
--- 108,112 ----
  		public void PlayWBFreigabe() {}
  		public void PlayWBGesperrt() {}
+ 		public void PlaySoundFromFile(string filename) {}
      }
  }



From nobody at sheep.berlios.de  Tue Jun 14 13:25:32 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:32 +0200
Subject: [Zusidisplay-cvs] zusidisplay/ET42X_/Network Network.cs,1.3,1.4
Message-ID: <200506141125.j5EBPW128511@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/ET42X_/Network
In directory sheep:/tmp/cvs-serv30727/ET42X_/Network

Modified Files:
	Network.cs 
Log Message:
Stand: 1.7.0-test3

Index: Network.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/Network/Network.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** Network.cs	26 May 2005 17:41:34 -0000	1.3
--- Network.cs	14 Jun 2005 11:25:29 -0000	1.4
***************
*** 361,364 ****
--- 361,368 ----
  				case 85:
  					// nur EBuLa
+ 					c.SetKm(valu);
+ 					break;
+ 				case 86:
+ 					c.SetT?ren(valu);
  					break;
  				case 88:



From nobody at sheep.berlios.de  Tue Jun 14 13:25:32 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:32 +0200
Subject: [Zusidisplay-cvs] zusidisplay/br185mmi AssemblyInfo.cs,1.4,1.5 BR185Control.cs,1.2,1.3 UserControler.cs,1.2,1.3
Message-ID: <200506141125.j5EBPW128521@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/br185mmi
In directory sheep:/tmp/cvs-serv30727/br185mmi

Modified Files:
	AssemblyInfo.cs BR185Control.cs UserControler.cs 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/br185mmi/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:08 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:30 -0000	1.5
***************
*** 26,30 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 26,30 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.0.*")]
  
  //

Index: BR185Control.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/br185mmi/BR185Control.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** BR185Control.cs	26 May 2005 17:41:35 -0000	1.2
--- BR185Control.cs	14 Jun 2005 11:25:30 -0000	1.3
***************
*** 111,115 ****
  		public BR185Control(MMI.EBuLa.Tools.XMLLoader conf)
  		{
! 			if (!conf.DoubleBuffer)
  			{
  				//This turns off internal double buffering of all custom GDI+ drawing
--- 111,116 ----
  		public BR185Control(MMI.EBuLa.Tools.XMLLoader conf)
  		{
! 			USE_DOUBLE_BUFFER = conf.DoubleBuffer;
! 			if (!USE_DOUBLE_BUFFER)
  			{
  				//This turns off internal double buffering of all custom GDI+ drawing
***************
*** 117,124 ****
  				this.SetStyle(ControlStyles.AllPaintingInWmPaint, true);
  				this.SetStyle(ControlStyles.UserPaint, true);
- 				USE_DOUBLE_BUFFER = false;
  			}
- 			else
- 				USE_DOUBLE_BUFFER = true;
  
  			InitializeComponent();
--- 118,122 ----
***************
*** 1236,1239 ****
--- 1234,1247 ----
  			if (localstate.SHOW_CLOCK) something_changed = true;
  		}
+ 
+ 		public void SetUhrDatumDigital(double valu)
+ 		{
+ 			try
+ 			{
+ 				SetUhrDatum(MMI.EBuLa.Tools.State.ConvertToDateTime(valu));
+ 			}
+ 			catch(Exception){}
+ 		}
+ 
  		public void DrawZugkraft_Fahrstufen(ref Graphics pg)
  		{
***************
*** 1702,1706 ****
  		public void UpdateScreen()
  		{
! 			if (!something_changed)
  				return;
  
--- 1710,1714 ----
  		public void UpdateScreen()
  		{
! 			if (!something_changed /*&& !m_conf.DoubleBuffer*/)
  				return;
  
***************
*** 2363,2367 ****
  			if (PREVENT_DRAW) return;
  
! 			if (m_backBuffer == null && m_conf.DoubleBuffer)
  			{
  				m_backBuffer= new Bitmap(this.ClientSize.Width, this.ClientSize.Height);
--- 2371,2375 ----
  			if (PREVENT_DRAW) return;
  
! 			if (m_backBuffer == null && USE_DOUBLE_BUFFER)
  			{
  				m_backBuffer= new Bitmap(this.ClientSize.Width, this.ClientSize.Height);

Index: UserControler.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/br185mmi/UserControler.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** UserControler.cs	26 May 2005 17:41:35 -0000	1.2
--- UserControler.cs	14 Jun 2005 11:25:30 -0000	1.3
***************
*** 67,71 ****
  				t = new Thread(new ThreadStart(net.Connect));
  				t.IsBackground = true;
! 				t.Priority = m_XMLConf.thread_prio;
  				t.Start();
  				Thread.Sleep(1);
--- 67,72 ----
  				t = new Thread(new ThreadStart(net.Connect));
  				t.IsBackground = true;
! 				//t.Priority = m_XMLConf.thread_prio;
! 				t.Priority = ThreadPriority.Highest;
  				t.Start();
  				Thread.Sleep(1);



From nobody at sheep.berlios.de  Tue Jun 14 13:25:31 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:31 +0200
Subject: [Zusidisplay-cvs] zusidisplay/ET42X_ AssemblyInfo.cs,1.4,1.5 ET42XControl.cs,1.3,1.4 ET42XControl.resx,1.3,1.4 State.cs,1.3,1.4 Switcher.cs,1.2,1.3 Switcher.resx,1.3,1.4
Message-ID: <200506141125.j5EBPV128509@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/ET42X_
In directory sheep:/tmp/cvs-serv30727/ET42X_

Modified Files:
	AssemblyInfo.cs ET42XControl.cs ET42XControl.resx State.cs 
	Switcher.cs Switcher.resx 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:07 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:29 -0000	1.5
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.0.*")]
  
  //

Index: ET42XControl.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/ET42XControl.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** ET42XControl.cs	26 May 2005 17:41:34 -0000	1.3
--- ET42XControl.cs	14 Jun 2005 11:25:29 -0000	1.4
***************
*** 40,43 ****
--- 40,44 ----
  		int St?rPos = 0;
  		private string[,] buttons = new string[11,2];
+ 		private bool[] buttons_highlighted = new bool[11];
  
  		Color ST?RUNG_BG = Color.Gold, ST?RUNG_FG = Color.Black;
***************
*** 75,78 ****
--- 76,81 ----
  		private System.Windows.Forms.Timer timer_eingabe;
  		private System.Windows.Forms.Timer timer_verbrauch;
+ 		private System.Windows.Forms.Timer timerNaechsterHaltDealy;
+ 		private System.Windows.Forms.Timer timerButtonsHighlight;
  
  		bool on = true;
***************
*** 102,106 ****
  			uhrsec = new ISphere(508+60, 41+60, 43);
  			uhrmin = new ISphere(508+60, 41+60, 43);
! 			uhrstd = new ISphere(508+60, 41+60, 30);
  			uhrrest = new ISphere(508+60, 41+60, 7);
  			center = new Point(508+60, 41+60);
--- 105,109 ----
  			uhrsec = new ISphere(508+60, 41+60, 43);
  			uhrmin = new ISphere(508+60, 41+60, 43);
! 			uhrstd = new ISphere(508+60, 41+60, 28);
  			uhrrest = new ISphere(508+60, 41+60, 7);
  			center = new Point(508+60, 41+60);
***************
*** 108,119 ****
  			m_conf = conf;
  
- 			localstate = new MMI.ET42X.ET42XState();
- 
- 			localstate.Energie = conf.Energie;
  
  			// NOTBREMSE und E-BREMSE fehlen
  
- 			SetButtons();
- 
  			switch (m_conf.Sound)
  			{
--- 111,117 ----
***************
*** 129,132 ****
--- 127,136 ----
  			}
  
+ 			localstate = new MMI.ET42X.ET42XState(ref conf, ref Sound);
+ 
+ 			SetButtons();
+ 
+ 			localstate.Energie = conf.Energie;
+ 
  			vtime = DateTime.Now;
  
***************
*** 185,188 ****
--- 189,194 ----
  			this.timer_eingabe = new System.Windows.Forms.Timer(this.components);
  			this.timer_verbrauch = new System.Windows.Forms.Timer(this.components);
+ 			this.timerNaechsterHaltDealy = new System.Windows.Forms.Timer(this.components);
+ 			this.timerButtonsHighlight = new System.Windows.Forms.Timer(this.components);
  			// 
  			// timer1
***************
*** 214,217 ****
--- 220,233 ----
  			this.timer_verbrauch.Tick += new System.EventHandler(this.timer_verbrauch_Tick);
  			// 
+ 			// timerNaechsterHaltDealy
+ 			// 
+ 			this.timerNaechsterHaltDealy.Interval = 500;
+ 			this.timerNaechsterHaltDealy.Tick += new System.EventHandler(this.timerNaechsterHaltDealy_Tick);
+ 			// 
+ 			// timerButtonsHighlight
+ 			// 
+ 			this.timerButtonsHighlight.Interval = 750;
+ 			this.timerButtonsHighlight.Tick += new System.EventHandler(this.timerButtonsHighlight_Tick);
+ 			// 
  			// ET42XControl
  			// 
***************
*** 254,258 ****
  					break;
  				case CURRENT_DISPLAY.FIS_HK:
! 					Send(FIS_DATA.Next_Entry);
  					break;
  			}
--- 270,276 ----
  					break;
  				case CURRENT_DISPLAY.FIS_HK:
! 					//Send(FIS_DATA.Next_Entry);
! 					// FIS-TODO
! 					localstate.fis.SwitchNaechsterHalt();
  					break;
  			}
***************
*** 281,285 ****
  					break;
  				case CURRENT_DISPLAY.FIS_HK:
! 					Send(FIS_DATA.Prev_Entry);
  					break;
  			}
--- 299,305 ----
  					break;
  				case CURRENT_DISPLAY.FIS_HK:
! 					//Send(FIS_DATA.Prev_Entry);
! 					// FIS-TODO
! 					localstate.fis.SwitchVorherigerHalt();
  					break;
  			}
***************
*** 297,303 ****
--- 317,331 ----
  						localstate.DISPLAY = CURRENT_DISPLAY.FIS_UPDATE;
  						timer2.Enabled = true;
+ 						localstate.fis.Status = true;
+ 						localstate.fis.UserEnabled = false;
  					}
  					localstate.fis.NextFISPos((IFISNetwork)m_net, IsCONNECTED);
  					break;
+ 				case CURRENT_DISPLAY.FIS_HK:
+ 					localstate.DISPLAY = CURRENT_DISPLAY.FIS;
+ 					if ((localstate.Geschwindigkeit > 0f && localstate.FISType == FIS_TYPE.FIS) ||
+ 						localstate.FISType != FIS_TYPE.FIS && localstate.FISType != FIS_TYPE.NONE)
+ 						timerNaechsterHaltDealy.Enabled = true;
+ 					break;
  				case CURRENT_DISPLAY.Zug_Tf_Nr:
  					if (localstate.marker >= 0 && localstate.marker < 6)
***************
*** 426,429 ****
--- 454,465 ----
  			switch(localstate.DISPLAY)
  			{
+ 				case CURRENT_DISPLAY.G:
+ 					if (FISAn())
+ 					{
+ 						localstate.fis.PlayAusstiegLinks();
+ 						buttons_highlighted[1] = true;
+ 						timerButtonsHighlight.Enabled = true;
+ 					}
+ 					break;
  				case CURRENT_DISPLAY.OBERSTROM:
  					localstate.OberstromGrenze = 1000f;
***************
*** 691,695 ****
  					{
  						if (IsCONNECTED)
! 							Send(FIS_DATA.FIS_Aus);
  						else
  							localstate.fis.FISAus();
--- 727,732 ----
  					{
  						if (IsCONNECTED)
! 							// FIS TODO Send(FIS_DATA.FIS_Aus);
! 							localstate.fis.FISAus();
  						else
  							localstate.fis.FISAus();
***************
*** 743,750 ****
  					break;
  				case CURRENT_DISPLAY.FIS:
! 					Send(FIS_DATA.FIS_Start);
  					break;
  				case CURRENT_DISPLAY.FIS_ROUTE:
! 					Send(FIS_DATA.FIS_Start);
  					break;
  				case CURRENT_DISPLAY.Zug_Tf_Nr:
--- 780,795 ----
  					break;
  				case CURRENT_DISPLAY.FIS:
! 					//Send(FIS_DATA.FIS_Start);
! 					// FIS TODO
! 					buttons_highlighted[8] = true;
! 					timerButtonsHighlight.Enabled = true;
! 					localstate.fis.UserEnabled = true;
  					break;
  				case CURRENT_DISPLAY.FIS_ROUTE:
! 					//Send(FIS_DATA.FIS_Start);
! 					// FIS TODO
! 					buttons_highlighted[8] = true;
! 					timerButtonsHighlight.Enabled = true;
! 					localstate.fis.UserEnabled = true;
  					break;
  				case CURRENT_DISPLAY.Zug_Tf_Nr:
***************
*** 788,792 ****
  				case CURRENT_DISPLAY.FIS:
  					if (buttons[9,0].IndexOf("FIS") > -1)
! 						Send(FIS_DATA.FIS_Ausloesen);
  					break;
  				case CURRENT_DISPLAY.Zug_Tf_Nr:
--- 833,845 ----
  				case CURRENT_DISPLAY.FIS:
  					if (buttons[9,0].IndexOf("FIS") > -1)
! 					{
! 						//Send(FIS_DATA.FIS_Ausloesen);
! 						//TODO FIS
! 						buttons_highlighted[9] = true;
! 						something_changed = true;
! 						Application.DoEvents();
! 						timerButtonsHighlight.Enabled = true;
! 						localstate.fis.PlayNaechsterHalt();
! 					}
  					break;
  				case CURRENT_DISPLAY.Zug_Tf_Nr:
***************
*** 821,829 ****
  			switch(localstate.DISPLAY)
  			{
  				case CURRENT_DISPLAY.FIS:
  					localstate.DISPLAY = CURRENT_DISPLAY.G;
  					break;
  				case CURRENT_DISPLAY.FIS_HK:
! 					localstate.DISPLAY = CURRENT_DISPLAY.G;
  					break;
  				case CURRENT_DISPLAY.FIS_ROUTE:
--- 874,890 ----
  			switch(localstate.DISPLAY)
  			{
+ 				case CURRENT_DISPLAY.G:
+ 					if (FISAn())
+ 					{
+ 						localstate.fis.PlayAusstiegRechts();
+ 						buttons_highlighted[10] = true;
+ 						timerButtonsHighlight.Enabled = true;
+ 					}
+ 					break;
  				case CURRENT_DISPLAY.FIS:
  					localstate.DISPLAY = CURRENT_DISPLAY.G;
  					break;
  				case CURRENT_DISPLAY.FIS_HK:
! 					//localstate.DISPLAY = CURRENT_DISPLAY.G;
  					break;
  				case CURRENT_DISPLAY.FIS_ROUTE:
***************
*** 1039,1042 ****
--- 1100,1189 ----
  		}
  
+ 		public void SetT?ren(float valu)
+ 		{
+ 			if ((valu * Math.Pow(10, 45) > 7.3) && (valu * Math.Pow(10, 45) < 8.7))
+ 			{
+ 				localstate.T?ren = T?REN.ZU_ABFAHRT;
+ 			}
+ 			else if ((valu * Math.Pow(10, 45) > 6.3) && (valu * Math.Pow(10, 45) < 7.7))
+ 			{
+ 				localstate.T?ren = T?REN.ZU;
+ 			}
+ 			else if ((valu * Math.Pow(10, 45) > 4.3) && (valu * Math.Pow(10, 45) < 5.7))
+ 			{
+ 				localstate.T?ren = T?REN.SCHLIESSEN;
+ 			}
+ 			else if ((valu * Math.Pow(10, 45) > 1.5) && (valu * Math.Pow(10, 45) < 2.9))
+ 			{
+ 				localstate.T?ren = T?REN.FAHRG?STE_I_O;
+ 			}
+ 			else if ((valu * Math.Pow(10, 45) < 1.5) && (valu * Math.Pow(10, 45) > 1.3))
+ 			{
+ 				localstate.T?ren = T?REN.AUF;
+ 				localstate.TuerenWarenOffen = true;
+ 				localstate.TuerenWarenOffenSound = true;
+ 				localstate.TuerenWarenOffenKM = localstate.StreckenKM;
+ 			}
+ 			else if (valu * Math.Pow(10, 45) < 1.0)
+ 			{
+ 				localstate.T?ren = T?REN.FREIGEGEBEN;
+ 			}
+ 		}
+ 		public void SetKm(float valu)
+ 		{
+ 			localstate.fis.GPSStatus = IsCONNECTED;
+ 			if (localstate.StreckenKM == float.MinValue)
+ 			{
+ 				if (valu != 0f)
+ 				{
+ 					localstate.StreckenKM = valu;
+ 					localstate.TuerenWarenOffenKM = localstate.StreckenKM;
+ 				}
+ 				return;
+ 			}
+ 
+ 			localstate.StreckenKM = valu;
+ 
+ 			if (!localstate.fis.UserEnabled) return;
+ 
+ 			if ((Math.Abs(localstate.StreckenKM - localstate.TuerenWarenOffenKM) > 2f) && localstate.TuerenWarenOffen)
+ 			{
+ 				localstate.TuerenWarenOffen = false;
+ 				localstate.fis.SwitchNaechsterHalt();
+ 			}
+ 			
+ 			if (localstate.FISType == FIS_TYPE.GPS_FIS || localstate.FISType == FIS_TYPE.GPS_ZN_FIS)
+ 			{
+ 				Struct_Netz netz = (Struct_Netz)localstate.fis.Netze[localstate.fis.Netze_ID];
+ 				Struct_Start start = (Struct_Start)netz.Start[netz.Start_ID];
+ 				string pos = "INIT";
+ 				float Fpos = float.MinValue;
+ 				try
+ 				{
+ 					pos = (string)start.Position[localstate.fis.NaechsterHalt];
+ 					pos = pos.Replace(".",",");
+ 					Fpos = Convert.ToSingle(pos) * 1000f;
+ 				}
+ 				catch(Exception){}
+                 
+ 				if (Fpos == float.MinValue) return;
+ 
+ 				if ((Math.Abs(localstate.StreckenKM - Fpos) < 70f) && localstate.TuerenWarenOffenSound)
+ 				{
+ 					localstate.TuerenWarenOffenSound = false;
+ 					localstate.fis.PlayNaechsterHalt();
+ 				}
+ 			}
+ 			else
+ 			{
+ 				if ((Math.Abs(localstate.StreckenKM - localstate.TuerenWarenOffenKM) > 30f) && localstate.TuerenWarenOffenSound)
+ 				{
+ 					localstate.TuerenWarenOffenSound = false;
+ 					localstate.fis.PlayNaechsterHalt();
+ 				}
+ 			}
+ 			
+ 			something_changed = true;
+ 		}
  		public void SetLMZugart(bool state, string text)
  		{
***************
*** 1791,1796 ****
  
  		}
! 		public void SetButtons()
  		{
  			switch(localstate.DISPLAY)
  			{
--- 1938,1950 ----
  
  		}
! 
! 		// <<<<<<<<<<<<<<<<<<< BUTTONS <<<<<<<<<<<<<<<<<<<<<
! 		public void SetButtons() 
  		{
+ 			/*for(int i = 0; i < 10; i++)
+ 			{
+ 				buttons_highlighted[i] = false;
+ 			}*/
+ 
  			switch(localstate.DISPLAY)
  			{
***************
*** 1933,1937 ****
  					break;
  				case CURRENT_DISPLAY.G:
! 					buttons[1,0] = ""; buttons[1,1] = "";
  					buttons[2,0] = ""; buttons[2,1] = "";//"W";
  					buttons[3,0] = ""; buttons[3,1] = "";
--- 2087,2098 ----
  					break;
  				case CURRENT_DISPLAY.G:
! 					if (FISAn())
! 					{
! 						buttons[1,0] = "Ausst."; buttons[1,1] = "links";
! 					}
! 					else
! 					{
! 						buttons[1,0] = ""; buttons[1,1] = "";
! 					}
  					buttons[2,0] = ""; buttons[2,1] = "";//"W";
  					buttons[3,0] = ""; buttons[3,1] = "";
***************
*** 1949,1953 ****
  					buttons[8,0] = "  FIS"; buttons[8,1] = "";
  					buttons[9,0] = "   S"; buttons[9,1] = "";
! 					buttons[10,0] = ""; buttons[10,1] = "";
  					break;
  				case CURRENT_DISPLAY.Zugbesy:
--- 2110,2121 ----
  					buttons[8,0] = "  FIS"; buttons[8,1] = "";
  					buttons[9,0] = "   S"; buttons[9,1] = "";
! 					if (FISAn())
! 					{
! 						buttons[10,0] = buttons[1,0]; buttons[10,1] = "rechts";
! 					}
! 					else
! 					{
! 						buttons[10,0] = ""; buttons[10,1] = "";
! 					}
  					break;
  				case CURRENT_DISPLAY.Zugbesy:
***************
*** 2012,2015 ****
--- 2180,2195 ----
  					buttons[10,0] = "   G"; buttons[10,1] = "";
  					break;
+ 				case CURRENT_DISPLAY.FIS_HK:
+ 					buttons[1,0] = ""; buttons[1,1] = "";
+ 					buttons[2,0] = ""; buttons[2,1] = "";
+ 					buttons[3,0] = ""; buttons[3,1] = "";
+ 					buttons[4,0] = ""; buttons[4,1] = "";
+ 					buttons[5,0] = ""; buttons[5,1] = ""; 
+ 					buttons[6,0] = ""; buttons[6,1] = "";
+ 					buttons[7,0] = ""; buttons[7,1] = "";
+ 					buttons[8,0] = ""; buttons[8,1] = "";
+ 					buttons[9,0] = ""; buttons[9,1] = "";
+ 					buttons[10,0] = ""; buttons[10,1] = "";
+ 					break;
  				default:
  					buttons[1,0] = ""; buttons[1,1] = "";
***************
*** 2026,2034 ****
  			}
  		}	
! 
  		public void DrawButtons(ref Graphics pg)
  		{
  			for(int i = 0; i < 10; i++)
! 			{
  				// Kasten
  				DrawFrame(ref pg, i*63, 410, 62, 49);
--- 2206,2221 ----
  			}
  		}	
!  
  		public void DrawButtons(ref Graphics pg)
  		{
  			for(int i = 0; i < 10; i++)
! 			{	
! 				Color col = BLACK;
! 				if (buttons_highlighted[i+1])
! 				{
! 					pg.FillRectangle(new SolidBrush(Color.Gold), i*63+2, 410+2, 62-4, 49-4);
! 					col = Color.Black;
! 				}
! 
  				// Kasten
  				DrawFrame(ref pg, i*63, 410, 62, 49);
***************
*** 2040,2045 ****
  				Font f = new Font("Arial", 4, FontStyle.Bold, GraphicsUnit.Millimeter);
  
! 				pg.DrawString(s1, f, new SolidBrush(BLACK), i*63+8, 415);
! 				pg.DrawString(s2, f, new SolidBrush(BLACK), i*63+8, 435);
  			}
  		}
--- 2227,2232 ----
  				Font f = new Font("Arial", 4, FontStyle.Bold, GraphicsUnit.Millimeter);
  
! 				pg.DrawString(s1, f, new SolidBrush(col), i*63+8, 415);
! 				pg.DrawString(s2, f, new SolidBrush(col), i*63+8, 435);
  			}
  		}
***************
*** 2434,2438 ****
  			f = new Font("Arial", 4, FontStyle.Bold, GraphicsUnit.Millimeter);
  			if (localstate.fis.NaechsterHalt == "")
! 				pg.DrawString("             ---", f, new SolidBrush(BLACK), 350, 98);
  			else
  				pg.DrawString(localstate.fis.NaechsterHalt, f, new SolidBrush(BLACK), 350, 98);
--- 2621,2625 ----
  			f = new Font("Arial", 4, FontStyle.Bold, GraphicsUnit.Millimeter);
  			if (localstate.fis.NaechsterHalt == "")
! 				pg.DrawString("               ---", f, new SolidBrush(BLACK), 350, 98);
  			else
  				pg.DrawString(localstate.fis.NaechsterHalt, f, new SolidBrush(BLACK), 350, 98);
***************
*** 2541,2548 ****
  		{
  			// Seitliche Soft-Keys
! 			if (localstate.DISPLAY != CURRENT_DISPLAY.FIS_HK && localstate.DISPLAY != CURRENT_DISPLAY.FIS_ROUTE)
  				DrawFrame(ref pg, 518, 43, 110, 48);
  			
! 			if (localstate.fis.position != FIS_POS.NONE)
  			{
  				DrawFrame(ref pg, 518, 105, 110, 50);
--- 2728,2741 ----
  		{
  			// Seitliche Soft-Keys
! 			if (localstate.DISPLAY != CURRENT_DISPLAY.FIS_HK &&
! 				localstate.DISPLAY != CURRENT_DISPLAY.FIS_UPDATE &&
! 				localstate.DISPLAY != CURRENT_DISPLAY.FIS_UPDATE2 &&
! 				localstate.DISPLAY != CURRENT_DISPLAY.FIS_ROUTE)
  				DrawFrame(ref pg, 518, 43, 110, 48);
  			
! 			if ((localstate.DISPLAY != CURRENT_DISPLAY.FIS_ROUTE &&
! 				localstate.DISPLAY != CURRENT_DISPLAY.FIS_UPDATE &&
! 				localstate.DISPLAY != CURRENT_DISPLAY.FIS_UPDATE2) ||
! 				localstate.fis.position != FIS_POS.NONE)
  			{
  				DrawFrame(ref pg, 518, 105, 110, 50);
***************
*** 2614,2627 ****
  			pg.DrawString("Aktuelle Routen:", f, new SolidBrush(BLACK), 5, 65-19);
  
  			f = new Font("Arial", 4, FontStyle.Bold, GraphicsUnit.Millimeter);
  			for (int i = 1; i <= GetTrainCount(); i++)
  			{
  				if (localstate.fis.position != FIS_POS.NONE || localstate.DISPLAY == CURRENT_DISPLAY.FIS_UPDATE)
  					pg.FillRectangle(new SolidBrush(Color.Gold), 72, 57-24+i*42, 230, 25);
  				pg.DrawString("Zug "+i.ToString(), f, new SolidBrush(BLACK), 10, 70-32+i*42);
  				if (!(localstate.fis.Linie == "" || localstate.fis.Ziel == "" || localstate.fis.NaechsterHalt == ""))
!                     pg.DrawString(localstate.fis.Linie + " / " + localstate.fis.Ziel, f, new SolidBrush(Color.Black), 100, 70-32+i*42);
  				else
  					pg.DrawString("", f, new SolidBrush(Color.Black), 100, 70-32+i*42);
  				DrawFrameSunkenSmall(ref pg, 72, 57-24+i*42, 230, 25);
  			}
--- 2807,2832 ----
  			pg.DrawString("Aktuelle Routen:", f, new SolidBrush(BLACK), 5, 65-19);
  
+ 			bool backgroundDrawn = false;
+ 
  			f = new Font("Arial", 4, FontStyle.Bold, GraphicsUnit.Millimeter);
  			for (int i = 1; i <= GetTrainCount(); i++)
  			{
+ 				backgroundDrawn = false;
  				if (localstate.fis.position != FIS_POS.NONE || localstate.DISPLAY == CURRENT_DISPLAY.FIS_UPDATE)
+ 				{
  					pg.FillRectangle(new SolidBrush(Color.Gold), 72, 57-24+i*42, 230, 25);
+ 					backgroundDrawn = true;
+ 				}
  				pg.DrawString("Zug "+i.ToString(), f, new SolidBrush(BLACK), 10, 70-32+i*42);
  				if (!(localstate.fis.Linie == "" || localstate.fis.Ziel == "" || localstate.fis.NaechsterHalt == ""))
! 				{
! 					SolidBrush brush = new SolidBrush(BLACK);
! 					if (backgroundDrawn) brush = new SolidBrush(Color.Black);
! 					pg.DrawString(localstate.fis.Linie + " / " + localstate.fis.Ziel, f, brush, 100, 70-32+i*42);
! 				}
  				else
+ 				{
  					pg.DrawString("", f, new SolidBrush(Color.Black), 100, 70-32+i*42);
+ 				}
  				DrawFrameSunkenSmall(ref pg, 72, 57-24+i*42, 230, 25);
  			}
***************
*** 4011,4015 ****
  					break;
  				case CURRENT_DISPLAY.FIS_UPDATE2:
! 					localstate.DISPLAY = CURRENT_DISPLAY.FIS_ROUTE;
  					something_changed = true;
  					timer2.Enabled = false;
--- 4216,4220 ----
  					break;
  				case CURRENT_DISPLAY.FIS_UPDATE2:
! 					localstate.DISPLAY = CURRENT_DISPLAY.FIS;
  					something_changed = true;
  					timer2.Enabled = false;
***************
*** 4091,4094 ****
--- 4296,4324 ----
  			}
  		}
+ 
+ 		private bool FISAn()
+ 		{
+ 			return (localstate.fis.Status);
+ 		}
+ 
+ 		private void timerNaechsterHaltDealy_Tick(object sender, System.EventArgs e)
+ 		{
+ 			timerNaechsterHaltDealy.Enabled = false;
+ 			try
+ 			{
+ 				localstate.fis.PlayNaechsterHalt();
+ 			}
+ 			catch(Exception){}
+ 		}
+ 
+ 		private void timerButtonsHighlight_Tick(object sender, System.EventArgs e)
+ 		{
+ 			timerButtonsHighlight.Enabled = false;
+ 			for(int i = 0; i < 11; i++)
+ 			{
+ 				buttons_highlighted[i] = false;
+ 			}
+ 			something_changed = true;
+ 		}                            
  	}
  }

Index: ET42XControl.resx
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/ET42XControl.resx,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** ET42XControl.resx	26 May 2005 17:41:34 -0000	1.3
--- ET42XControl.resx	14 Jun 2005 11:25:29 -0000	1.4
***************
*** 143,146 ****
--- 143,164 ----
      <value>Private</value>
    </data>
+   <data name="timerNaechsterHaltDealy.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="timerNaechsterHaltDealy.Location" type="System.Drawing.Point, System.Drawing, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
+     <value>531, 17</value>
+   </data>
+   <data name="timerNaechsterHaltDealy.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="timerButtonsHighlight.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
+   <data name="timerButtonsHighlight.Location" type="System.Drawing.Point, System.Drawing, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a">
+     <value>706, 17</value>
+   </data>
+   <data name="timerButtonsHighlight.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
    <data name="$this.TrayLargeIcon" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>

Index: State.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/State.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** State.cs	26 May 2005 17:41:34 -0000	1.3
--- State.cs	14 Jun 2005 11:25:29 -0000	1.4
***************
*** 23,29 ****
  		public CURRENT_DISPLAY DISPLAY = CURRENT_DISPLAY.INIT;
  		public CURRENT_DISPLAY OLD_DISPLAY = CURRENT_DISPLAY.NONE;
! 		public ET42XTYPE ET42Xtype1 = ET42XTYPE.ET425;
! 		public ET42XTYPE ET42Xtype2 = ET42XTYPE.ET425;
! 		public ET42XTYPE ET42Xtype3 = ET42XTYPE.ET425;
  
  		public FIS_TYPE FISType = FIS_TYPE.GPS_FIS;
--- 23,29 ----
  		public CURRENT_DISPLAY DISPLAY = CURRENT_DISPLAY.INIT;
  		public CURRENT_DISPLAY OLD_DISPLAY = CURRENT_DISPLAY.NONE;
! 		public ET42XTYPE ET42Xtype1 = ET42XTYPE.ET423;
! 		public ET42XTYPE ET42Xtype2 = ET42XTYPE.ET423;
! 		public ET42XTYPE ET42Xtype3 = ET42XTYPE.NONE;
  
  		public FIS_TYPE FISType = FIS_TYPE.GPS_FIS;
***************
*** 39,43 ****
  		public float E_Bremse = 0f;
  
! 		public T?REN T?ren = T?REN.ZU;
  
  		public bool DSK_Gesperrt = false;
--- 39,43 ----
  		public float E_Bremse = 0f;
  
! 		public T?REN T?ren = T?REN.AUF;
  
  		public bool DSK_Gesperrt = false;
***************
*** 46,54 ****
  		public bool Kuehlung = true;
  
  
  		public St?rungsManager st?rungmgr = new St?rungsManager();
  
  
! 		public ET42XState()
  		{	
  			HBL_Druck = 5f;
--- 46,62 ----
  		public bool Kuehlung = true;
  
+ 		public float StreckenKM = float.MinValue;
+ 
+ 		public T?REN TuerenStatus = T?REN.AUF;
+ 
+ 		public bool TuerenWarenOffen = true;
+ 		public bool TuerenWarenOffenSound = true;
+ 		public float TuerenWarenOffenKM = 0f;
  
  		public St?rungsManager st?rungmgr = new St?rungsManager();
  
+ 		MMI.EBuLa.Tools.XMLLoader localconf;
  
! 		public ET42XState(ref MMI.EBuLa.Tools.XMLLoader conf, ref SoundInterface sound)
  		{	
  			HBL_Druck = 5f;
***************
*** 56,62 ****
  			//st?rungmgr.Add(new St?rung(ENUMSt?rung.S02_Trennsch?tz));
  			st?rungmgr.Add(new St?rung(ENUMSt?rung.S01_ZUSIKomm));			
  		}
  
! 		public FIS fis = new FIS();
  		
  		public string Zugnummer = "<INIT>";
--- 64,72 ----
  			//st?rungmgr.Add(new St?rung(ENUMSt?rung.S02_Trennsch?tz));
  			st?rungmgr.Add(new St?rung(ENUMSt?rung.S01_ZUSIKomm));			
+ 			localconf = conf;
+ 			fis = new FIS(ref conf, ref sound);
  		}
  
! 		public FIS fis;
  		
  		public string Zugnummer = "<INIT>";

Index: Switcher.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/Switcher.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** Switcher.cs	26 May 2005 17:41:34 -0000	1.2
--- Switcher.cs	14 Jun 2005 11:25:29 -0000	1.3
***************
*** 418,421 ****
--- 418,422 ----
  			this.AutoScaleBaseSize = new System.Drawing.Size(5, 13);
  			this.ClientSize = new System.Drawing.Size(522, 328);
+ 			this.ControlBox = false;
  			this.Controls.Add(this.groupBox2);
  			this.Controls.Add(this.groupBox4);

Index: Switcher.resx
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ET42X_/Switcher.resx,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** Switcher.resx	26 May 2005 17:41:34 -0000	1.3
--- Switcher.resx	14 Jun 2005 11:25:29 -0000	1.4
***************
*** 107,113 ****
      <value>Private</value>
    </data>
-   <data name="b_cancel.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
-     <value>Private</value>
-   </data>
    <data name="b_cancel.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
--- 107,110 ----
***************
*** 116,119 ****
--- 113,119 ----
      <value>Private</value>
    </data>
+   <data name="b_cancel.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
+     <value>Private</value>
+   </data>
    <data name="cb_12std.Locked" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
***************
*** 155,162 ****
      <value>False</value>
    </data>
!   <data name="rb_425_2.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="rb_425_2.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
--- 155,162 ----
      <value>False</value>
    </data>
!   <data name="rb_425_2.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>
!   <data name="rb_425_2.Modifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
    </data>



From nobody at sheep.berlios.de  Tue Jun 14 13:25:32 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:32 +0200
Subject: [Zusidisplay-cvs] zusidisplay/SystemTools AssemblyInfo.vb,1.4,1.5
Message-ID: <200506141125.j5EBPW128514@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/SystemTools
In directory sheep:/tmp/cvs-serv30727/SystemTools

Modified Files:
	AssemblyInfo.vb 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.vb
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/SystemTools/AssemblyInfo.vb,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.vb	6 Jun 2005 11:03:07 -0000	1.4
--- AssemblyInfo.vb	14 Jun 2005 11:25:29 -0000	1.5
***************
*** 30,32 ****
  ' zur?ckgreifen, indem Sie '*' wie unten angezeigt verwenden:
  
! <Assembly: AssemblyVersion("1.6.5.*")> 
--- 30,32 ----
  ' zur?ckgreifen, indem Sie '*' wie unten angezeigt verwenden:
  
! <Assembly: AssemblyVersion("1.7.0.*")> 



From nobody at sheep.berlios.de  Tue Jun 14 13:25:33 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:33 +0200
Subject: [Zusidisplay-cvs] zusidisplay/br185mmi/Network Network.cs,1.3,1.4
Message-ID: <200506141125.j5EBPW128523@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/br185mmi/Network
In directory sheep:/tmp/cvs-serv30727/br185mmi/Network

Modified Files:
	Network.cs 
Log Message:
Stand: 1.7.0-test3

Index: Network.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/br185mmi/Network/Network.cs,v
retrieving revision 1.3
retrieving revision 1.4
diff -C2 -d -r1.3 -r1.4
*** Network.cs	26 May 2005 17:41:35 -0000	1.3
--- Network.cs	14 Jun 2005 11:25:30 -0000	1.4
***************
*** 118,121 ****
--- 118,122 ----
  			BinaryReader reader = new BinaryReader(new MemoryStream(buffer));
  			float valu = reader.ReadSingle();
+ 			//double Dvalu = reader.ReadDouble();
  
  			bool state = false;
***************
*** 202,205 ****
--- 203,209 ----
  				case 47: // T?ren offen
  					c.SetLM_T?r(state);
+ 					break;
+ 				case 50:  // Uhrzeit digital
+ 					//c.SetUhrDatumDigital(valu);
  					break;
  				case 56: // AFB



From nobody at sheep.berlios.de  Tue Jun 14 13:25:32 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:32 +0200
Subject: [Zusidisplay-cvs] zusidisplay/VT612 AssemblyInfo.cs,1.4,1.5
Message-ID: <200506141125.j5EBPW128517@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/VT612
In directory sheep:/tmp/cvs-serv30727/VT612

Modified Files:
	AssemblyInfo.cs 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/VT612/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:08 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:30 -0000	1.5
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.0.*")]
  
  //



From nobody at sheep.berlios.de  Tue Jun 14 13:25:33 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:25:33 +0200
Subject: [Zusidisplay-cvs] zusidisplay/ice3 AssemblyInfo.cs,1.4,1.5
Message-ID: <200506141125.j5EBPX128525@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/ice3
In directory sheep:/tmp/cvs-serv30727/ice3

Modified Files:
	AssemblyInfo.cs 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/ice3/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:08 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:30 -0000	1.5
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.0.*")]
  
  //



From nobody at sheep.berlios.de  Tue Jun 14 13:26:00 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:26:00 +0200
Subject: [Zusidisplay-cvs] zusidisplay/Diagnose AssemblyInfo.cs,1.4,1.5
Message-ID: <200506141126.j5EBQ0128552@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/Diagnose
In directory sheep:/tmp/cvs-serv30727/Diagnose

Modified Files:
	AssemblyInfo.cs 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/Diagnose/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:06 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:28 -0000	1.5
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.0.*")]
  
  //



From nobody at sheep.berlios.de  Tue Jun 14 13:26:00 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:26:00 +0200
Subject: [Zusidisplay-cvs] zusidisplay/EBuLaTools AssemblyInfo.cs,1.4,1.5 State.cs,1.2,1.3
Message-ID: <200506141126.j5EBQ0128554@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/EBuLaTools
In directory sheep:/tmp/cvs-serv30727/EBuLaTools

Modified Files:
	AssemblyInfo.cs State.cs 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLaTools/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:07 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:28 -0000	1.5
***************
*** 26,30 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 26,30 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.0.*")]
  
  //

Index: State.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/EBuLaTools/State.cs,v
retrieving revision 1.2
retrieving revision 1.3
diff -C2 -d -r1.2 -r1.3
*** State.cs	26 May 2005 17:41:33 -0000	1.2
--- State.cs	14 Jun 2005 11:25:28 -0000	1.3
***************
*** 163,166 ****
--- 163,192 ----
  			LM_Befehl2 = false;
  		}
+ 
+ 		static public DateTime ConvertToDateTime(double input)
+ 		{
+ 			long days = (long)input;
+ 			double time = input - (double)days;
+ 
+ 			DateTime dt = new DateTime(0);
+ 			dt = DateTime.Parse("30.12.1899 0:00");
+ 
+ 			// date
+ 			while (days > 0)
+ 			{
+ 				dt = dt.AddDays(1);
+ 				days--;
+ 			}
+                   
+ 			// time
+ 			long hours = (long)(time * 24);
+ 			long minutes = (long)((time - (double)hours / 24d) * 24d * 60d);
+ 			long seconds = (long)((time - ((double)hours / 24d) - ((double)minutes / 60d / 24d)) * 24d * 60d * 60d);
+ 			dt = dt.AddHours(hours);
+ 			dt = dt.AddMinutes(minutes);
+ 			dt = dt.AddSeconds(seconds);
+ 
+ 			return dt;
+ 		}
  	}
  }



From nobody at sheep.berlios.de  Tue Jun 14 13:26:00 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:26:00 +0200
Subject: [Zusidisplay-cvs] zusidisplay AboutBox.cs,1.5,1.6 AboutBox.resx,1.4,1.5 AssemblyInfo.cs,1.4,1.5
Message-ID: <200506141126.j5EBQ0128546@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay
In directory sheep:/tmp/cvs-serv30727

Modified Files:
	AboutBox.cs AboutBox.resx AssemblyInfo.cs 
Log Message:
Stand: 1.7.0-test3

Index: AboutBox.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/AboutBox.cs,v
retrieving revision 1.5
retrieving revision 1.6
diff -C2 -d -r1.5 -r1.6
*** AboutBox.cs	6 Jun 2005 11:03:03 -0000	1.5
--- AboutBox.cs	14 Jun 2005 11:25:27 -0000	1.6
***************
*** 160,164 ****
  			this.label7.Size = new System.Drawing.Size(184, 16);
  			this.label7.TabIndex = 11;
! 			this.label7.Text = "FT95 FIS Terminal (alpha)";
  			// 
  			// label13
--- 160,164 ----
  			this.label7.Size = new System.Drawing.Size(184, 16);
  			this.label7.TabIndex = 11;
! 			this.label7.Text = "FT95 FIS Terminal";
  			// 
  			// label13

Index: AboutBox.resx
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/AboutBox.resx,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AboutBox.resx	6 Jun 2005 11:03:05 -0000	1.4
--- AboutBox.resx	14 Jun 2005 11:25:27 -0000	1.5
***************
*** 323,329 ****
      <value>False</value>
    </data>
-   <data name="$this.Name">
-     <value>AboutBox</value>
-   </data>
    <data name="$this.Localizable" type="System.Boolean, mscorlib, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>False</value>
--- 323,326 ----
***************
*** 343,346 ****
--- 340,346 ----
    <data name="$this.DefaultModifiers" type="System.CodeDom.MemberAttributes, System, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <value>Private</value>
+   </data>
+   <data name="$this.Name">
+     <value>AboutBox</value>
    </data>
    <data name="$this.Icon" type="System.Drawing.Icon, System.Drawing, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" mimetype="application/x-microsoft.net.object.bytearray.base64">

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:05 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:27 -0000	1.5
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.0.*")]
  
  //



From nobody at sheep.berlios.de  Tue Jun 14 13:26:00 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:26:00 +0200
Subject: [Zusidisplay-cvs] zusidisplay/David AssemblyInfo.cs,1.4,1.5
Message-ID: <200506141126.j5EBQ0128550@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/David
In directory sheep:/tmp/cvs-serv30727/David

Modified Files:
	AssemblyInfo.cs 
Log Message:
Stand: 1.7.0-test3

Index: AssemblyInfo.cs
===================================================================
RCS file: /cvsroot/zusidisplay/zusidisplay/David/AssemblyInfo.cs,v
retrieving revision 1.4
retrieving revision 1.5
diff -C2 -d -r1.4 -r1.5
*** AssemblyInfo.cs	6 Jun 2005 11:03:06 -0000	1.4
--- AssemblyInfo.cs	14 Jun 2005 11:25:28 -0000	1.5
***************
*** 27,31 ****
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.6.5.*")]
  
  //
--- 27,31 ----
  // mit '*' angeben:
  
! [assembly: AssemblyVersion("1.7.6.*")]
  
  //



From nobody at sheep.berlios.de  Tue Jun 14 13:29:17 2005
From: nobody at sheep.berlios.de (jens_h)
Date: Tue, 14 Jun 2005 13:29:17 +0200
Subject: [Zusidisplay-cvs] zusidisplay/EBuLaTools FIS.cs,NONE,1.1 Strung.cs,NONE,1.1
Message-ID: <200506141129.j5EBTH128743@bat.berlios.de>

Update of /cvsroot/zusidisplay/zusidisplay/EBuLaTools
In directory sheep:/tmp/cvs-serv31673/EBuLaTools

Added Files:
	FIS.cs St?rung.cs 
Log Message:
fis.cs und st?rung.cs neu im Repository

--- NEW FILE: FIS.cs ---
using System;
using System.Collections;
using System.IO;
using System.Xml;
using System.Threading;
using Microsoft.Win32;

namespace MMI.EBuLa.Tools
{
	public enum FIS_DATA
	{
		Status=1, GPS_Status, Naechster_Halt, Route_Data, Next_Entry, Prev_Entry, 
		FIS_Ausloesen, FIS_Start, FIS_Aus,
		Set_Status, Set_NaechsterHalt, Set_Route_Netz, Set_Route_Linie, 
		Set_Route_Start, Set_Route_Ziel, Set_FISTYPE
	}

	public enum FIS_TYPE
	{
[...1206 lines suppressed...]

			int retval = -1;
            
			foreach(Struct_Start start in netz.Start)
			{
				retval++;
				if (start.Start == name) return retval;
			}            

			return -1;
		}

		private void GetStartZiel(string track, out string start, out string ziel)
		{
			int pos = track.IndexOf("-");
			start = track.Substring(0, pos).Trim();
			ziel = track.Substring(pos+1, track.Length-pos-1).Trim();
		}	
	}
}

--- NEW FILE: St?rung.cs ---
using System;
using System.Collections;

namespace MMI.EBuLa.Tools
{
	public enum ENUMSt?rung
	{
		NONE=1, S01_ZUSIKomm, S02_Trennsch?tz, S11_ZUSIKomm
	}

	public class St?rung
	{
		ENUMSt?rung enum_st;
		int priority;
		string name, description;
		bool read = false;

		public St?rung(ENUMSt?rung new_st)
		{
			switch (new_st)
			{
				case ENUMSt?rung.NONE:
					enum_st = new_st;
					priority = int.MaxValue;
					name = "";
					break;

				case ENUMSt?rung.S01_ZUSIKomm:
					enum_st = new_st;
					priority = 1;
					name = "ZUSI-Kom 1";
					description = "Kommunikation mit ZUSI gest?rt";
					break;

				case ENUMSt?rung.S11_ZUSIKomm:
					enum_st = new_st;
					priority = 1;
					name = "ZUSI-Kom 2";
					description = "ZUSI mit TCP Server verbunden";
					break;
				
				case ENUMSt?rung.S02_Trennsch?tz:
					enum_st = new_st;
					priority = 2;
					name = "Traktion";
					description = "Trennsch?tze gefallen";
					break;
			}
		}

		public ENUMSt?rung Type {get{return enum_st;}}
		public int Priority {get{return priority;}}
		public string Name {get{return name;}}
		public string Description {get{return description;}}
		public bool Read {get{return read;}set{read = value;}}

		public override bool Equals(Object other)
		{
			St?rung st;
			try
			{
				st = (St?rung)other;
				return (enum_st == st.enum_st);
			}
			catch(Exception)
			{
				return false;
			}
			
		}

		public override int GetHashCode()
		{
			return base.GetHashCode ()+(int)enum_st;
		}

	}

	public class St?rungsManager
	{
		ArrayList m_st?rungen = new ArrayList();
		ArrayList m_pass_st?rungen = new ArrayList();

		public St?rung St?rStack = null;

		XMLLoader m_conf;
		SoundInterface sound;

		public St?rungsManager(/*ref XMLLoader conf, ref SoundInterface si*/)
		{
			St?rung s = new St?rung(ENUMSt?rung.NONE);
			m_st?rungen.Add(s);
			m_pass_st?rungen.Add(s);
			/*m_conf = conf;
			sound = si;*/
		}

		public St?rung LastSt?rung
		{
			get
			{
				St?rung s = (St?rung)m_st?rungen[0];
				if (s.Type == ENUMSt?rung.NONE)
				{
					return (St?rung)m_pass_st?rungen[0];
				}
				else
				{
					return s;
				}
			}
		}
		public St?rung FirstPassiveSt?rung
		{
			get
			{
				St?rung st = (St?rung)m_pass_st?rungen[0];
				return st;
			}
		}
	

		public St?rung Current
		{
			get
			{
				St?rung s = (St?rung)m_st?rungen[0];
				return s;
			}
		}

		public ArrayList GetPassives()
		{
			return m_pass_st?rungen;
		}

		public void PopCurrent()
		{
			St?rung st = (St?rung)m_st?rungen[0];
			if (st.Priority != int.MaxValue) 
			{
				St?rStack = st;
				m_st?rungen.Remove(st);
				AddToPassive(st);
			}
		}

		public void DeleteCurrent()
		{
			St?rung st = (St?rung)m_st?rungen[0];
			if (st.Priority != int.MaxValue) 
			{
				m_st?rungen.Remove(st);
				if (m_st?rungen.Count < 2) St?rStack = null;
			}
		}

		public void DeleteSt?rung(ENUMSt?rung st)
		{
			try
			{
				if (st != ENUMSt?rung.NONE)
				{
					bool endnow;
					do
					{
						endnow = true;
						for (int i = 0; i < m_st?rungen.Count; i++)
						{
							if (((St?rung)m_st?rungen[i]).Type == st)
							{
								m_st?rungen.RemoveAt(i);
								endnow = false;
							}
						}
						for (int i = 0; i < m_pass_st?rungen.Count; i++)
						{
							if (((St?rung)m_pass_st?rungen[i]).Type == st)
							{
								m_pass_st?rungen.RemoveAt(i);
								endnow = false;
							}
						}
					}
					while(!endnow);
				}
			}
			catch(Exception){}
		}

		public void Add(St?rung newst)
		{
			if (m_st?rungen.IndexOf(newst,0) > -1) return;
			if (m_pass_st?rungen.IndexOf(newst,0) > -1) return;

			/*if (m_conf.Sound > 0  && (getSt?rungen.IndexOf(newst) < 0))
			{
				sound.PlayErrorSound();
			}*/

			int target = m_st?rungen.Count;
			for (int i = 0; i < target; i++)
			{
				St?rung curr = (St?rung)m_st?rungen[i];

				if (curr.Priority > newst.Priority)
				{
					m_st?rungen.Insert(i, newst);
					St?rStack = (St?rung)m_st?rungen[0];
					break;
				}
			}
			
		}

		private void AddToPassive(St?rung newst)
		{
			int target = m_pass_st?rungen.Count;
			for (int i = 0; i < target; i++)
			{
				St?rung curr = (St?rung)m_pass_st?rungen[i];

				if (curr.Priority > newst.Priority)
				{
					m_pass_st?rungen.Insert(i, newst);
				}
			}
		}

		public int getSt?rungsCount
		{
			get
			{
				return (m_st?rungen.Count + m_pass_st?rungen.Count - 2);
			}
		}

		public ArrayList getSt?rungen
		{
			get
			{
				return m_st?rungen;
			}
		}

		public ArrayList getPSt?rungen
		{
			get
			{
				return m_pass_st?rungen;
			}
		}
	}
}



